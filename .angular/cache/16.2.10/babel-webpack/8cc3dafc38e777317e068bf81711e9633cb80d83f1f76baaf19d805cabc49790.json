{"ast":null,"code":"import _asyncToGenerator from \"C:/Users/CSEG/Desktop/thassign/node_modules/@angular-devkit/build-angular/node_modules/@babel/runtime/helpers/esm/asyncToGenerator.js\";\nimport { ElementRef } from '@angular/core';\nimport { MatLegacyCheckbox as MatCheckbox } from '@angular/material/legacy-checkbox';\nimport { MatLegacyPaginator as MatPaginator } from '@angular/material/legacy-paginator';\nimport { tap } from 'rxjs/operators';\nimport { merge } from 'rxjs';\n// import { any } from '../../../../../../server/src/modules/users/user.schema';\n// import { User } from '@src/app/models/users.schema';\nimport { UserDetailComponent } from '@src/app/modules/users/components/user-detail/user-detail.component';\nimport { UserSortComponent } from '@src/app/modules/users/components/user-sort/user-sort.component';\nimport * as i0 from \"@angular/core\";\nimport * as i1 from \"@angular/router\";\nimport * as i2 from \"@src/app/modules/assignments/services/assignment.service\";\nimport * as i3 from \"@src/app/modules/users/user.service\";\nimport * as i4 from \"@src/app/core/services/part.service\";\nimport * as i5 from \"@angular/material/legacy-dialog\";\nimport * as i6 from \"@angular/common\";\nimport * as i7 from \"@angular/material/legacy-button\";\nimport * as i8 from \"@angular/material/legacy-checkbox\";\nimport * as i9 from \"@angular/material/legacy-chips\";\nimport * as i10 from \"@angular/material/expansion\";\nimport * as i11 from \"@angular/material/icon\";\nimport * as i12 from \"@angular/material/legacy-paginator\";\nimport * as i13 from \"@angular/material/legacy-tooltip\";\nimport * as i14 from \"@src/app/shared/directives/confirm.directive\";\nimport * as i15 from \"@src/app/shared/components/loader/loader.component\";\nimport * as i16 from \"@src/app/modules/users/components/user-filter/user-filter.component\";\nfunction UserListComponent_ng_template_45_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelement(0, \"app-loader\");\n  }\n}\nfunction UserListComponent_div_47_mat_expansion_panel_2_div_11_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelementStart(0, \"div\", 31)(1, \"mat-icon\", 32);\n    i0.ɵɵtext(2, \"phone\");\n    i0.ɵɵelementEnd();\n    i0.ɵɵtext(3);\n    i0.ɵɵelementEnd();\n  }\n  if (rf & 2) {\n    const user_r5 = i0.ɵɵnextContext().$implicit;\n    i0.ɵɵadvance(3);\n    i0.ɵɵtextInterpolate1(\" \", user_r5.phone, \" \");\n  }\n}\nfunction UserListComponent_div_47_mat_expansion_panel_2_div_12_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelementStart(0, \"div\", 33)(1, \"mat-icon\", 32);\n    i0.ɵɵtext(2, \"mail_outline\");\n    i0.ɵɵelementEnd();\n    i0.ɵɵtext(3);\n    i0.ɵɵelementEnd();\n  }\n  if (rf & 2) {\n    const user_r5 = i0.ɵɵnextContext().$implicit;\n    i0.ɵɵadvance(3);\n    i0.ɵɵtextInterpolate1(\" \", user_r5.email, \" \");\n  }\n}\nfunction UserListComponent_div_47_mat_expansion_panel_2_ng_template_13_div_5_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelementStart(0, \"div\", 35)(1, \"mat-icon\", 32);\n    i0.ɵɵtext(2, \"info\");\n    i0.ɵɵelementEnd();\n    i0.ɵɵtext(3);\n    i0.ɵɵelementEnd();\n  }\n  if (rf & 2) {\n    const user_r5 = i0.ɵɵnextContext(2).$implicit;\n    i0.ɵɵadvance(3);\n    i0.ɵɵtextInterpolate1(\" \", user_r5.progress, \" \");\n  }\n}\nfunction UserListComponent_div_47_mat_expansion_panel_2_ng_template_13_div_6_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelementStart(0, \"div\", 43)(1, \"mat-icon\", 32);\n    i0.ɵɵtext(2, \"phone\");\n    i0.ɵɵelementEnd();\n    i0.ɵɵtext(3);\n    i0.ɵɵelementEnd();\n  }\n  if (rf & 2) {\n    const user_r5 = i0.ɵɵnextContext(2).$implicit;\n    i0.ɵɵadvance(3);\n    i0.ɵɵtextInterpolate1(\" \", user_r5.phone, \" \");\n  }\n}\nfunction UserListComponent_div_47_mat_expansion_panel_2_ng_template_13_div_7_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelementStart(0, \"div\", 44)(1, \"mat-icon\", 32);\n    i0.ɵɵtext(2, \"mail_outline\");\n    i0.ɵɵelementEnd();\n    i0.ɵɵtext(3);\n    i0.ɵɵelementEnd();\n  }\n  if (rf & 2) {\n    const user_r5 = i0.ɵɵnextContext(2).$implicit;\n    i0.ɵɵadvance(3);\n    i0.ɵɵtextInterpolate1(\" \", user_r5.email, \" \");\n  }\n}\nfunction UserListComponent_div_47_mat_expansion_panel_2_ng_template_13_mat_chip_9_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelementStart(0, \"mat-chip\", 45);\n    i0.ɵɵtext(1);\n    i0.ɵɵpipe(2, \"translate\");\n    i0.ɵɵelementEnd();\n  }\n  if (rf & 2) {\n    const part_r20 = ctx.$implicit;\n    i0.ɵɵadvance(1);\n    i0.ɵɵtextInterpolate1(\" \", i0.ɵɵpipeBind1(2, 1, part_r20.name), \" \");\n  }\n}\nfunction UserListComponent_div_47_mat_expansion_panel_2_ng_template_13_Template(rf, ctx) {\n  if (rf & 1) {\n    const _r22 = i0.ɵɵgetCurrentView();\n    i0.ɵɵelementStart(0, \"div\", 34)(1, \"div\", 35)(2, \"mat-icon\", 32);\n    i0.ɵɵtext(3, \"person\");\n    i0.ɵɵelementEnd();\n    i0.ɵɵtext(4);\n    i0.ɵɵelementEnd();\n    i0.ɵɵtemplate(5, UserListComponent_div_47_mat_expansion_panel_2_ng_template_13_div_5_Template, 4, 1, \"div\", 36);\n    i0.ɵɵtemplate(6, UserListComponent_div_47_mat_expansion_panel_2_ng_template_13_div_6_Template, 4, 1, \"div\", 37);\n    i0.ɵɵtemplate(7, UserListComponent_div_47_mat_expansion_panel_2_ng_template_13_div_7_Template, 4, 1, \"div\", 38);\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementStart(8, \"mat-chip-list\", 39);\n    i0.ɵɵtemplate(9, UserListComponent_div_47_mat_expansion_panel_2_ng_template_13_mat_chip_9_Template, 3, 3, \"mat-chip\", 40);\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementStart(10, \"mat-action-row\")(11, \"button\", 41);\n    i0.ɵɵlistener(\"click\", function UserListComponent_div_47_mat_expansion_panel_2_ng_template_13_Template_button_click_11_listener() {\n      i0.ɵɵrestoreView(_r22);\n      i0.ɵɵnextContext();\n      const _r7 = i0.ɵɵreference(1);\n      return i0.ɵɵresetView(_r7.expanded = false);\n    });\n    i0.ɵɵelementStart(12, \"mat-icon\", 32);\n    i0.ɵɵtext(13, \"close\");\n    i0.ɵɵelementEnd();\n    i0.ɵɵtext(14);\n    i0.ɵɵpipe(15, \"titlecase\");\n    i0.ɵɵpipe(16, \"translate\");\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementStart(17, \"button\", 42);\n    i0.ɵɵlistener(\"confirmed\", function UserListComponent_div_47_mat_expansion_panel_2_ng_template_13_Template_button_confirmed_17_listener() {\n      i0.ɵɵrestoreView(_r22);\n      const user_r5 = i0.ɵɵnextContext().$implicit;\n      const ctx_r23 = i0.ɵɵnextContext(2);\n      return i0.ɵɵresetView(ctx_r23.delete([user_r5._id]));\n    });\n    i0.ɵɵpipe(18, \"translate\");\n    i0.ɵɵpipe(19, \"translate\");\n    i0.ɵɵpipe(20, \"translate\");\n    i0.ɵɵpipe(21, \"translate\");\n    i0.ɵɵelementStart(22, \"mat-icon\", 32);\n    i0.ɵɵtext(23, \"delete\");\n    i0.ɵɵelementEnd();\n    i0.ɵɵtext(24);\n    i0.ɵɵpipe(25, \"titlecase\");\n    i0.ɵɵpipe(26, \"translate\");\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementStart(27, \"button\", 41);\n    i0.ɵɵlistener(\"click\", function UserListComponent_div_47_mat_expansion_panel_2_ng_template_13_Template_button_click_27_listener($event) {\n      i0.ɵɵrestoreView(_r22);\n      const user_r5 = i0.ɵɵnextContext().$implicit;\n      const ctx_r25 = i0.ɵɵnextContext(2);\n      return i0.ɵɵresetView(ctx_r25.openView($event, user_r5));\n    });\n    i0.ɵɵelementStart(28, \"mat-icon\", 32);\n    i0.ɵɵtext(29, \"description\");\n    i0.ɵɵelementEnd();\n    i0.ɵɵtext(30);\n    i0.ɵɵpipe(31, \"titlecase\");\n    i0.ɵɵpipe(32, \"translate\");\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementStart(33, \"button\", 41);\n    i0.ɵɵlistener(\"click\", function UserListComponent_div_47_mat_expansion_panel_2_ng_template_13_Template_button_click_33_listener() {\n      i0.ɵɵrestoreView(_r22);\n      const user_r5 = i0.ɵɵnextContext().$implicit;\n      const ctx_r27 = i0.ɵɵnextContext(2);\n      return i0.ɵɵresetView(ctx_r27.goto(\"/users/edit\", user_r5));\n    });\n    i0.ɵɵelementStart(34, \"mat-icon\", 32);\n    i0.ɵɵtext(35, \"edit\");\n    i0.ɵɵelementEnd();\n    i0.ɵɵtext(36);\n    i0.ɵɵpipe(37, \"titlecase\");\n    i0.ɵɵpipe(38, \"translate\");\n    i0.ɵɵelementEnd()();\n  }\n  if (rf & 2) {\n    const user_r5 = i0.ɵɵnextContext().$implicit;\n    i0.ɵɵadvance(4);\n    i0.ɵɵtextInterpolate1(\" \", user_r5.type, \" \");\n    i0.ɵɵadvance(1);\n    i0.ɵɵproperty(\"ngIf\", user_r5.progress);\n    i0.ɵɵadvance(1);\n    i0.ɵɵproperty(\"ngIf\", user_r5.phone);\n    i0.ɵɵadvance(1);\n    i0.ɵɵproperty(\"ngIf\", user_r5.email);\n    i0.ɵɵadvance(2);\n    i0.ɵɵproperty(\"ngForOf\", user_r5.parts);\n    i0.ɵɵadvance(5);\n    i0.ɵɵtextInterpolate1(\" \", i0.ɵɵpipeBind1(15, 13, i0.ɵɵpipeBind1(16, 15, \"close\")), \" \");\n    i0.ɵɵadvance(3);\n    i0.ɵɵpropertyInterpolate(\"appConfirm\", i0.ɵɵpipeBind1(18, 17, \"dialog.delete.confirmation.title\"));\n    i0.ɵɵpropertyInterpolate(\"message\", i0.ɵɵpipeBind1(19, 19, \"dialog.delete.confirmation.message\"));\n    i0.ɵɵpropertyInterpolate(\"cancelButton\", i0.ɵɵpipeBind1(20, 21, \"dialog.delete.confirmation.cancelButton\"));\n    i0.ɵɵpropertyInterpolate(\"confirmButton\", i0.ɵɵpipeBind1(21, 23, \"dialog.delete.confirmation.confirmButton\"));\n    i0.ɵɵadvance(7);\n    i0.ɵɵtextInterpolate1(\" \", i0.ɵɵpipeBind1(25, 25, i0.ɵɵpipeBind1(26, 27, \"delete\")), \" \");\n    i0.ɵɵadvance(6);\n    i0.ɵɵtextInterpolate1(\" \", i0.ɵɵpipeBind1(31, 29, i0.ɵɵpipeBind1(32, 31, \"view\")), \" \");\n    i0.ɵɵadvance(6);\n    i0.ɵɵtextInterpolate1(\" \", i0.ɵɵpipeBind1(37, 33, i0.ɵɵpipeBind1(38, 35, \"edit\")), \" \");\n  }\n}\nfunction UserListComponent_div_47_mat_expansion_panel_2_Template(rf, ctx) {\n  if (rf & 1) {\n    const _r31 = i0.ɵɵgetCurrentView();\n    i0.ɵɵelementStart(0, \"mat-expansion-panel\", 19, 20)(2, \"mat-expansion-panel-header\", 21)(3, \"mat-panel-title\", 22)(4, \"div\", 23)(5, \"mat-checkbox\", 24);\n    i0.ɵɵlistener(\"change\", function UserListComponent_div_47_mat_expansion_panel_2_Template_mat_checkbox_change_5_listener() {\n      i0.ɵɵrestoreView(_r31);\n      const ctx_r30 = i0.ɵɵnextContext(2);\n      return i0.ɵɵresetView(ctx_r30.handleCheckboxes());\n    })(\"click\", function UserListComponent_div_47_mat_expansion_panel_2_Template_mat_checkbox_click_5_listener($event) {\n      return $event.stopPropagation();\n    });\n    i0.ɵɵelementEnd()();\n    i0.ɵɵelementStart(6, \"div\", 25);\n    i0.ɵɵelement(7, \"img\", 26);\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementStart(8, \"div\", 27);\n    i0.ɵɵtext(9);\n    i0.ɵɵelementEnd()();\n    i0.ɵɵelementStart(10, \"mat-panel-description\", 27);\n    i0.ɵɵtemplate(11, UserListComponent_div_47_mat_expansion_panel_2_div_11_Template, 4, 1, \"div\", 28);\n    i0.ɵɵtemplate(12, UserListComponent_div_47_mat_expansion_panel_2_div_12_Template, 4, 1, \"div\", 29);\n    i0.ɵɵelementEnd()();\n    i0.ɵɵtemplate(13, UserListComponent_div_47_mat_expansion_panel_2_ng_template_13_Template, 39, 37, \"ng-template\", 30);\n    i0.ɵɵelementEnd();\n  }\n  if (rf & 2) {\n    const user_r5 = ctx.$implicit;\n    const ctx_r4 = i0.ɵɵnextContext(2);\n    i0.ɵɵadvance(5);\n    i0.ɵɵproperty(\"value\", user_r5._id)(\"checked\", ctx_r4.masterChecked);\n    i0.ɵɵadvance(2);\n    i0.ɵɵpropertyInterpolate1(\"src\", \"/assets/icon/\", user_r5.type, \".svg\", i0.ɵɵsanitizeUrl);\n    i0.ɵɵadvance(2);\n    i0.ɵɵtextInterpolate1(\" \", user_r5.fullName, \" \");\n    i0.ɵɵadvance(2);\n    i0.ɵɵproperty(\"ngIf\", user_r5.phone);\n    i0.ɵɵadvance(1);\n    i0.ɵɵproperty(\"ngIf\", user_r5.email);\n  }\n}\nfunction UserListComponent_div_47_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelementStart(0, \"div\")(1, \"mat-accordion\", 17);\n    i0.ɵɵtemplate(2, UserListComponent_div_47_mat_expansion_panel_2_Template, 14, 6, \"mat-expansion-panel\", 18);\n    i0.ɵɵelementEnd()();\n  }\n  if (rf & 2) {\n    const pUsers_r3 = ctx.ngIf;\n    const ctx_r2 = i0.ɵɵnextContext();\n    i0.ɵɵadvance(2);\n    i0.ɵɵproperty(\"ngForOf\", pUsers_r3)(\"ngForTrackBy\", ctx_r2.trackById);\n  }\n}\nconst _c0 = function () {\n  return [\"/users/add\"];\n};\nexport class UserListComponent {\n  constructor(router, assignmentService, userService, partService, dialog) {\n    this.router = router;\n    this.assignmentService = assignmentService;\n    this.userService = userService;\n    this.partService = partService;\n    this.dialog = dialog;\n    /**\r\n     * State of the master checkbox\r\n     */\n    this.masterChecked = false;\n    // State of all checkboxes\n    this.noUserChecked = true;\n    this.display = 'grid'; // 'grid' or 'list'\n    this.sortField = 'firstName';\n    this.sortOrder = 'asc';\n    /**\r\n     * Number of total users filtered\r\n     */\n    this.dataLength = 0;\n    this.pageSize = 10;\n    this.pageIndex = 0;\n    this.pageSizeOptions = [1, 2, 5, 10, 25, 100];\n    this.searchTerm = '';\n  }\n  ngOnInit() {\n    this.userService.data.subscribe(users => {\n      this.users = users;\n      this.pUsers$ = this.userService.pUsers;\n    });\n    // TODO see if it is possible to get the last assignment of each user\n    // combineLatest([this.userService.data, this.assignmentService.data])\n    //   .subscribe(([users, assignments]) => {\n    //   if (users !== null && assignments !== null) {\n    //     this.assignmentService.groupAssignmentsByUser(assignments, users);\n    //     console.log(this.assignmentService.assignmentsByUser);\n    //   }\n    // });\n    this.getUsers();\n  }\n  ngAfterViewInit() {\n    // Handle paginators\n    let obsForPagination;\n    this.paginators.forEach(paginator => {\n      merge(paginator.page, this.userService.data).pipe(tap(() => {\n        this.getUsers(paginator);\n        this.pageSize = paginator.pageSize;\n        this.pageIndex = paginator.pageIndex;\n      })).subscribe();\n    });\n    // Handle master checkbox\n    this.usersCheckboxes.first.change.subscribe(() => {\n      this.masterChecked = this.usersCheckboxes.first.checked;\n      this.noUserChecked = !this.masterChecked;\n    });\n    // this.getUsers();\n  }\n\n  generateUsers() {\n    var _this = this;\n    return _asyncToGenerator(function* () {\n      yield _this.userService.generateUsers(10, _this.partService.getParts());\n    })();\n  }\n  // addUser() {\n  //   this.userService.testOs();\n  // }\n  /**\r\n   * Fetch users from db and\r\n   * display them in the paginated grid\r\n   */\n  getUsers(paginator) {\n    // Clear users list to display the loader\n    this.users = null;\n    this.userService.sortField = this.sortField;\n    this.userService.sortOrder = this.sortOrder;\n    this.userService.pageSize = paginator !== undefined ? paginator.pageSize : this.pageSize;\n    this.userService.pageIndex = paginator !== undefined ? paginator.pageIndex : this.pageIndex;\n    this.userService.searchTerm = this.searchTerm;\n    this.dataLength = this.userService.paginateUsers();\n    // Handle users checkboxes\n    // this.usersCheckboxes.forEach((c, index, usersCheckboxes) => {\n    //   // Do not handle the first (master)\n    //   if (index !== 0) {\n    //     c.change.subscribe(() => {\n    //       this.handleCheckboxes();\n    //     });\n    //   }\n    // });\n  }\n  /**\r\n   * Called on every toggle of checkboxes\r\n   * to toggle also the master checkbox and delete button\r\n   */\n  handleCheckboxes() {\n    // If all are checked check the master too\n    this.usersCheckboxes.first.checked = this.usersCheckboxes.toArray().slice(1).every((checkbox, i) => checkbox.checked);\n    // this.masterChecked = this.usersCheckboxes.first.checked;\n    // If all are unchecked, disable the delete button\n    this.noUserChecked = !this.usersCheckboxes.some((_, i) => _.checked);\n  }\n  /**\r\n   * Perform a search from the filter input\r\n   */\n  searchByName(searchTerms) {\n    this.searchTerm = searchTerms;\n    this.pageIndex = 0; // Set the paginator pack to the first page\n    this.getUsers();\n  }\n  /**\r\n   * Improve performance of ngFor directive by specifying the key for uniqueness\r\n   * in case we need to update the list\r\n   * @see https://netbasal.com/angular-2-improve-performance-with-trackby-cc147b5104e5\r\n   *\r\n   */\n  trackById(index, item) {\n    return item._id;\n  }\n  // goto(event, user: any): void {\n  //   this.router.navigateByUrl(`user/details/${user._id}`);\n  // }\n  goto(path, user) {\n    if (user) {\n      this.userService.currentUser = user;\n    }\n    this.router.navigate([path]);\n  }\n  delete(userId) {\n    var _this2 = this;\n    return _asyncToGenerator(function* () {\n      try {\n        yield _this2.userService.deleteUser(userId);\n        // Refresh the list\n        _this2.getUsers();\n      } catch (error) {\n        throw error;\n      }\n    })();\n  }\n  /**\r\n   * Return the list of checked users\r\n   * skipping the master checkbox\r\n   */\n  getCheckedUsers() {\n    return this.usersCheckboxes.filter((c, i) => i !== 0 && c.checked) // List of checked\n    .map(c => c.value); // Return the value (user)\n  }\n  // Handle view user detail button\n  userDetailsModal(event, user) {\n    return _asyncToGenerator(function* () {})();\n  } // display UserDetailComponent in a modal\n  // Handle user edit button\n  userEditModal(event, user) {\n    return _asyncToGenerator(function* () {})();\n  } // display UserEditComponent in a modal\n\n  switchDisplay() {\n    switch (this.display) {\n      case 'grid':\n        this.display = 'list';\n        break;\n      default:\n        this.display = 'grid';\n    }\n  }\n  /**\r\n   * open a dialog with details of a user\r\n   */\n  openView(evt, user) {\n    this.dialog.open(UserDetailComponent, {\n      data: {\n        user: user\n      }\n    });\n  }\n  // Call the sort field dialog\n  openSort(evt) {\n    const target = new ElementRef(evt.currentTarget);\n    const dialogRef = this.dialog.open(UserSortComponent, {\n      data: {\n        trigger: target,\n        sort: this.sortField\n      }\n    });\n    dialogRef.afterClosed().subscribe(sort => {\n      if (sort && this.sortField !== sort) {\n        this.sortField = sort;\n        this.getUsers();\n      }\n    });\n  }\n  toggleSortOrder() {\n    var _this3 = this;\n    return _asyncToGenerator(function* () {\n      _this3.sortOrder = _this3.sortOrder === 'asc' ? 'desc' : 'asc';\n      _this3.getUsers();\n    })();\n  }\n  static #_ = this.ɵfac = function UserListComponent_Factory(t) {\n    return new (t || UserListComponent)(i0.ɵɵdirectiveInject(i1.Router), i0.ɵɵdirectiveInject(i2.AssignmentService), i0.ɵɵdirectiveInject(i3.UserService), i0.ɵɵdirectiveInject(i4.PartService), i0.ɵɵdirectiveInject(i5.MatLegacyDialog));\n  };\n  static #_2 = this.ɵcmp = /*@__PURE__*/i0.ɵɵdefineComponent({\n    type: UserListComponent,\n    selectors: [[\"app-user-list\"]],\n    viewQuery: function UserListComponent_Query(rf, ctx) {\n      if (rf & 1) {\n        i0.ɵɵviewQuery(MatPaginator, 5);\n        i0.ɵɵviewQuery(MatCheckbox, 5);\n      }\n      if (rf & 2) {\n        let _t;\n        i0.ɵɵqueryRefresh(_t = i0.ɵɵloadQuery()) && (ctx.paginators = _t);\n        i0.ɵɵqueryRefresh(_t = i0.ɵɵloadQuery()) && (ctx.usersCheckboxes = _t);\n      }\n    },\n    decls: 50,\n    vars: 61,\n    consts: [[\"mat-fab\", \"\", 1, \"mat-fab-bottom-right\", 3, \"matTooltip\", \"routerLink\"], [3, \"performedSearch\"], [\"fxLayout\", \"row\", \"fxLayoutAlign\", \"end start\"], [\"mat-raised-button\", \"\", \"fxFlex\", \"1\", \"fxFlexAlign\", \"right\", 3, \"matTooltip\", \"click\"], [\"fxLayout\", \"row\", \"fxLayoutAlign\", \"space-between stretch\"], [\"fxFlex\", \"30px\", \"fxFlexOffset\", \"25px\", \"fxFlexAlign\", \"center\"], [3, \"checked\", \"matTooltip\"], [\"fxFlexAlign\", \"center\"], [\"mat-icon-button\", \"\", 3, \"click\"], [\"mat-button\", \"\", \"disabled\", \"true\"], [\"mat-icon-button\", \"\", 3, \"matTooltip\", \"click\"], [\"fxFlex\", \"30px\", \"fxFlexAlign\", \"center\"], [\"mat-icon-button\", \"\", 3, \"disabled\", \"matTooltip\", \"appConfirm\", \"message\", \"cancelButton\", \"confirmButton\", \"confirmed\"], [\"fxFlex\", \"\"], [3, \"length\", \"pageSize\", \"pageIndex\", \"pageSizeOptions\", \"page\"], [\"loading\", \"\"], [4, \"ngIf\", \"ngIfElse\"], [\"multi\", \"false\"], [\"hideToggle\", \"true\", 4, \"ngFor\", \"ngForOf\", \"ngForTrackBy\"], [\"hideToggle\", \"true\"], [\"mep\", \"matExpansionPanel\"], [\"fxLayout\", \"row\", \"fxLayoutAlign\", \"start stretch\", \"fxLayoutGap\", \"\"], [\"fxFlex\", \"\", \"fxFlex.lt-sm\", \"100\", \"fxFlexAlign\", \"center\", \"fxLayout\", \"row\", \"fxLayoutAlign\", \"space-between stretch\", \"fxLayoutGap\", \"15px\"], [\"fxFlex\", \"25px\", \"fxFlexAlign\", \"center\"], [\"name\", \"userCheckbox\", 3, \"value\", \"checked\", \"change\", \"click\"], [\"fxFlex\", \"30px\"], [1, \"genre-icon\", 3, \"src\"], [\"fxFlex\", \"\", \"fxFlexAlign\", \"center\"], [\"fxFlex\", \"\", \"fxHide.lt-sm\", \"\", 4, \"ngIf\"], [\"fxFlex\", \"\", \"fxHide.lt-md\", \"\", 4, \"ngIf\"], [\"matExpansionPanelContent\", \"\"], [\"fxFlex\", \"\", \"fxHide.lt-sm\", \"\"], [\"inline\", \"true\"], [\"fxFlex\", \"\", \"fxHide.lt-md\", \"\"], [\"fxLayout\", \"row wrap\", \"fxLayout.lt-sm\", \"column\", \"fxLayoutAlign\", \"start stretch\"], [\"fxFlex\", \"45\"], [\"fxFlex\", \"45\", 4, \"ngIf\"], [\"fxFlex\", \"\", \"fxHide.gt-xs\", \"\", 4, \"ngIf\"], [\"fxFlex\", \"\", \"fxHide.gt-sm\", \"\", 4, \"ngIf\"], [\"selectable\", \"false\", \"fxLayout\", \"row\", \"fxLayoutAlign\", \"start stretch\"], [\"class\", \"mat-chip-list-stacked\", \"aria-orientation\", \"vertical\", 4, \"ngFor\", \"ngForOf\"], [\"mat-button\", \"\", 3, \"click\"], [\"mat-button\", \"\", 3, \"appConfirm\", \"message\", \"cancelButton\", \"confirmButton\", \"confirmed\"], [\"fxFlex\", \"\", \"fxHide.gt-xs\", \"\"], [\"fxFlex\", \"\", \"fxHide.gt-sm\", \"\"], [\"aria-orientation\", \"vertical\", 1, \"mat-chip-list-stacked\"]],\n    template: function UserListComponent_Template(rf, ctx) {\n      if (rf & 1) {\n        i0.ɵɵelementStart(0, \"button\", 0);\n        i0.ɵɵpipe(1, \"titlecase\");\n        i0.ɵɵpipe(2, \"translate\");\n        i0.ɵɵelementStart(3, \"mat-icon\");\n        i0.ɵɵtext(4, \"person_add\");\n        i0.ɵɵelementEnd()();\n        i0.ɵɵelementStart(5, \"h2\");\n        i0.ɵɵtext(6);\n        i0.ɵɵpipe(7, \"titlecase\");\n        i0.ɵɵpipe(8, \"translate\");\n        i0.ɵɵelementEnd();\n        i0.ɵɵelementStart(9, \"div\")(10, \"app-user-filter\", 1);\n        i0.ɵɵlistener(\"performedSearch\", function UserListComponent_Template_app_user_filter_performedSearch_10_listener($event) {\n          return ctx.searchByName($event);\n        });\n        i0.ɵɵelementEnd()();\n        i0.ɵɵelementStart(11, \"div\", 2)(12, \"button\", 3);\n        i0.ɵɵlistener(\"click\", function UserListComponent_Template_button_click_12_listener() {\n          return ctx.generateUsers();\n        });\n        i0.ɵɵpipe(13, \"titlecase\");\n        i0.ɵɵpipe(14, \"translate\");\n        i0.ɵɵelementStart(15, \"mat-icon\");\n        i0.ɵɵtext(16, \"autorenew\");\n        i0.ɵɵelementEnd()()();\n        i0.ɵɵelementStart(17, \"div\", 4)(18, \"div\", 5);\n        i0.ɵɵelement(19, \"mat-checkbox\", 6);\n        i0.ɵɵpipe(20, \"translate\");\n        i0.ɵɵelementEnd();\n        i0.ɵɵelementStart(21, \"div\", 7)(22, \"button\", 8);\n        i0.ɵɵlistener(\"click\", function UserListComponent_Template_button_click_22_listener($event) {\n          return ctx.openSort($event);\n        });\n        i0.ɵɵelementStart(23, \"mat-icon\");\n        i0.ɵɵtext(24, \"sort\");\n        i0.ɵɵelementEnd()();\n        i0.ɵɵelementStart(25, \"button\", 9);\n        i0.ɵɵtext(26);\n        i0.ɵɵpipe(27, \"titlecase\");\n        i0.ɵɵpipe(28, \"translate\");\n        i0.ɵɵpipe(29, \"translate\");\n        i0.ɵɵelementEnd();\n        i0.ɵɵelementStart(30, \"button\", 10);\n        i0.ɵɵlistener(\"click\", function UserListComponent_Template_button_click_30_listener() {\n          return ctx.toggleSortOrder();\n        });\n        i0.ɵɵpipe(31, \"translate\");\n        i0.ɵɵelementStart(32, \"mat-icon\");\n        i0.ɵɵtext(33);\n        i0.ɵɵelementEnd()()();\n        i0.ɵɵelementStart(34, \"div\", 11)(35, \"button\", 12);\n        i0.ɵɵlistener(\"confirmed\", function UserListComponent_Template_button_confirmed_35_listener() {\n          return ctx.delete(ctx.getCheckedUsers());\n        });\n        i0.ɵɵpipe(36, \"translate\");\n        i0.ɵɵpipe(37, \"translate\");\n        i0.ɵɵpipe(38, \"translate\");\n        i0.ɵɵpipe(39, \"translate\");\n        i0.ɵɵpipe(40, \"translate\");\n        i0.ɵɵelementStart(41, \"mat-icon\");\n        i0.ɵɵtext(42, \"delete\");\n        i0.ɵɵelementEnd()()();\n        i0.ɵɵelement(43, \"div\", 13);\n        i0.ɵɵelementEnd();\n        i0.ɵɵelementStart(44, \"mat-paginator\", 14);\n        i0.ɵɵlistener(\"page\", function UserListComponent_Template_mat_paginator_page_44_listener($event) {\n          return ctx.pageEvent = $event;\n        });\n        i0.ɵɵelementEnd();\n        i0.ɵɵtemplate(45, UserListComponent_ng_template_45_Template, 1, 0, \"ng-template\", null, 15, i0.ɵɵtemplateRefExtractor);\n        i0.ɵɵtemplate(47, UserListComponent_div_47_Template, 3, 2, \"div\", 16);\n        i0.ɵɵpipe(48, \"async\");\n        i0.ɵɵelementStart(49, \"mat-paginator\", 14);\n        i0.ɵɵlistener(\"page\", function UserListComponent_Template_mat_paginator_page_49_listener($event) {\n          return ctx.pageEvent = $event;\n        });\n        i0.ɵɵelementEnd();\n      }\n      if (rf & 2) {\n        const _r0 = i0.ɵɵreference(46);\n        i0.ɵɵpropertyInterpolate(\"matTooltip\", i0.ɵɵpipeBind1(1, 26, i0.ɵɵpipeBind1(2, 28, \"add-user\")));\n        i0.ɵɵproperty(\"routerLink\", i0.ɵɵpureFunction0(60, _c0));\n        i0.ɵɵadvance(6);\n        i0.ɵɵtextInterpolate(i0.ɵɵpipeBind1(7, 30, i0.ɵɵpipeBind1(8, 32, \"users\")));\n        i0.ɵɵadvance(6);\n        i0.ɵɵpropertyInterpolate(\"matTooltip\", i0.ɵɵpipeBind1(13, 34, i0.ɵɵpipeBind1(14, 36, \"generate-users\")));\n        i0.ɵɵadvance(7);\n        i0.ɵɵpropertyInterpolate(\"matTooltip\", i0.ɵɵpipeBind1(20, 38, \"select-all\"));\n        i0.ɵɵproperty(\"checked\", ctx.masterChecked);\n        i0.ɵɵadvance(7);\n        i0.ɵɵtextInterpolate2(\" \", i0.ɵɵpipeBind1(27, 40, i0.ɵɵpipeBind1(28, 42, \"sort-by\")), \" \", i0.ɵɵpipeBind1(29, 44, ctx.sortField.replace(\"_\", \"-\")), \" \");\n        i0.ɵɵadvance(4);\n        i0.ɵɵpropertyInterpolate(\"matTooltip\", i0.ɵɵpipeBind1(31, 46, \"sort-order\"));\n        i0.ɵɵadvance(3);\n        i0.ɵɵtextInterpolate1(\" arrow_\", ctx.sortOrder === \"asc\" ? \"upward\" : \"downward\", \" \");\n        i0.ɵɵadvance(2);\n        i0.ɵɵpropertyInterpolate(\"matTooltip\", i0.ɵɵpipeBind1(36, 48, \"delete\"));\n        i0.ɵɵpropertyInterpolate(\"appConfirm\", i0.ɵɵpipeBind1(37, 50, \"dialog.delete.confirmation.title\"));\n        i0.ɵɵpropertyInterpolate(\"message\", i0.ɵɵpipeBind1(38, 52, \"dialog.delete.confirmation.message\"));\n        i0.ɵɵpropertyInterpolate(\"cancelButton\", i0.ɵɵpipeBind1(39, 54, \"dialog.delete.confirmation.cancelButton\"));\n        i0.ɵɵpropertyInterpolate(\"confirmButton\", i0.ɵɵpipeBind1(40, 56, \"dialog.delete.confirmation.confirmButton\"));\n        i0.ɵɵproperty(\"disabled\", ctx.noUserChecked);\n        i0.ɵɵadvance(9);\n        i0.ɵɵproperty(\"length\", ctx.dataLength)(\"pageSize\", ctx.pageSize)(\"pageIndex\", ctx.pageIndex)(\"pageSizeOptions\", ctx.pageSizeOptions);\n        i0.ɵɵadvance(3);\n        i0.ɵɵproperty(\"ngIf\", i0.ɵɵpipeBind1(48, 58, ctx.pUsers$))(\"ngIfElse\", _r0);\n        i0.ɵɵadvance(2);\n        i0.ɵɵproperty(\"length\", ctx.dataLength)(\"pageSize\", ctx.pageSize)(\"pageIndex\", ctx.pageIndex)(\"pageSizeOptions\", ctx.pageSizeOptions);\n      }\n    },\n    dependencies: [i6.NgForOf, i6.NgIf, i7.MatLegacyButton, i8.MatLegacyCheckbox, i9.MatLegacyChipList, i9.MatLegacyChip, i10.MatAccordion, i10.MatExpansionPanel, i10.MatExpansionPanelActionRow, i10.MatExpansionPanelHeader, i10.MatExpansionPanelTitle, i10.MatExpansionPanelDescription, i10.MatExpansionPanelContent, i11.MatIcon, i12.MatLegacyPaginator, i13.MatLegacyTooltip, i14.ConfirmDirective, i15.LoaderComponent, i1.RouterLink, i16.UserFilterComponent, i6.AsyncPipe, i6.TitleCasePipe],\n    encapsulation: 2\n  });\n}","map":{"version":3,"names":["ElementRef","MatLegacyCheckbox","MatCheckbox","MatLegacyPaginator","MatPaginator","tap","merge","UserDetailComponent","UserSortComponent","i0","ɵɵelement","ɵɵelementStart","ɵɵtext","ɵɵelementEnd","ɵɵadvance","ɵɵtextInterpolate1","user_r5","phone","email","progress","ɵɵpipeBind1","part_r20","name","ɵɵtemplate","UserListComponent_div_47_mat_expansion_panel_2_ng_template_13_div_5_Template","UserListComponent_div_47_mat_expansion_panel_2_ng_template_13_div_6_Template","UserListComponent_div_47_mat_expansion_panel_2_ng_template_13_div_7_Template","UserListComponent_div_47_mat_expansion_panel_2_ng_template_13_mat_chip_9_Template","ɵɵlistener","UserListComponent_div_47_mat_expansion_panel_2_ng_template_13_Template_button_click_11_listener","ɵɵrestoreView","_r22","ɵɵnextContext","_r7","ɵɵreference","ɵɵresetView","expanded","UserListComponent_div_47_mat_expansion_panel_2_ng_template_13_Template_button_confirmed_17_listener","$implicit","ctx_r23","delete","_id","UserListComponent_div_47_mat_expansion_panel_2_ng_template_13_Template_button_click_27_listener","$event","ctx_r25","openView","UserListComponent_div_47_mat_expansion_panel_2_ng_template_13_Template_button_click_33_listener","ctx_r27","goto","type","ɵɵproperty","parts","ɵɵpropertyInterpolate","UserListComponent_div_47_mat_expansion_panel_2_Template_mat_checkbox_change_5_listener","_r31","ctx_r30","handleCheckboxes","UserListComponent_div_47_mat_expansion_panel_2_Template_mat_checkbox_click_5_listener","stopPropagation","UserListComponent_div_47_mat_expansion_panel_2_div_11_Template","UserListComponent_div_47_mat_expansion_panel_2_div_12_Template","UserListComponent_div_47_mat_expansion_panel_2_ng_template_13_Template","ctx_r4","masterChecked","ɵɵpropertyInterpolate1","ɵɵsanitizeUrl","fullName","UserListComponent_div_47_mat_expansion_panel_2_Template","pUsers_r3","ctx_r2","trackById","UserListComponent","constructor","router","assignmentService","userService","partService","dialog","noUserChecked","display","sortField","sortOrder","dataLength","pageSize","pageIndex","pageSizeOptions","searchTerm","ngOnInit","data","subscribe","users","pUsers$","pUsers","getUsers","ngAfterViewInit","obsForPagination","paginators","forEach","paginator","page","pipe","usersCheckboxes","first","change","checked","generateUsers","_this","_asyncToGenerator","getParts","undefined","paginateUsers","toArray","slice","every","checkbox","i","some","_","searchByName","searchTerms","index","item","path","user","currentUser","navigate","userId","_this2","deleteUser","error","getCheckedUsers","filter","c","map","value","userDetailsModal","event","userEditModal","switchDisplay","evt","open","openSort","target","currentTarget","dialogRef","trigger","sort","afterClosed","toggleSortOrder","_this3","ɵɵdirectiveInject","i1","Router","i2","AssignmentService","i3","UserService","i4","PartService","i5","MatLegacyDialog","_2","selectors","viewQuery","UserListComponent_Query","rf","ctx","UserListComponent_Template_app_user_filter_performedSearch_10_listener","UserListComponent_Template_button_click_12_listener","UserListComponent_Template_button_click_22_listener","UserListComponent_Template_button_click_30_listener","UserListComponent_Template_button_confirmed_35_listener","UserListComponent_Template_mat_paginator_page_44_listener","pageEvent","UserListComponent_ng_template_45_Template","ɵɵtemplateRefExtractor","UserListComponent_div_47_Template","UserListComponent_Template_mat_paginator_page_49_listener","ɵɵpureFunction0","_c0","ɵɵtextInterpolate","ɵɵtextInterpolate2","replace","_r0"],"sources":["C:\\Users\\CSEG\\Desktop\\thassign\\src\\app\\modules\\users\\pages\\user-list\\user-list.component.ts","C:\\Users\\CSEG\\Desktop\\thassign\\src\\app\\modules\\users\\pages\\user-list\\user-list.component.html"],"sourcesContent":["import {\r\n  AfterViewInit,\r\n  Component,\r\n  OnInit,\r\n  QueryList,\r\n  ViewChildren,\r\n  ElementRef,\r\n} from '@angular/core';\r\nimport { Router } from '@angular/router';\r\nimport { MatLegacyDialog as MatDialog } from '@angular/material/legacy-dialog';\r\nimport { MatLegacyCheckbox as MatCheckbox } from '@angular/material/legacy-checkbox';\r\nimport { MatLegacyPaginator as MatPaginator, LegacyPageEvent as PageEvent } from '@angular/material/legacy-paginator';\r\nimport { tap } from 'rxjs/operators';\r\nimport { Observable, merge } from 'rxjs';\r\n\r\n// import { any } from '../../../../../../server/src/modules/users/user.schema';\r\n// import { User } from '@src/app/models/users.schema';\r\nimport { UserDetailComponent } from '@src/app/modules/users/components/user-detail/user-detail.component';\r\nimport { AssignmentService } from '@src/app/modules/assignments/services/assignment.service';\r\nimport { UserService } from '@src/app/modules/users/user.service';\r\nimport { UserSortComponent } from '@src/app/modules/users/components/user-sort/user-sort.component';\r\nimport { User } from '@src/app/core/models/user/user.model';\r\nimport { PartService } from '@src/app/core/services/part.service';\r\n\r\n@Component({\r\n  selector: 'app-user-list',\r\n  templateUrl: 'user-list.component.html',\r\n  // styleUrls: ['user-list.component.scss']\r\n})\r\nexport class UserListComponent implements OnInit, AfterViewInit {\r\n  users: User[];\r\n\r\n  /**\r\n   * All users from the DB\r\n   */\r\n  // users$: Observable<User[]>;\r\n\r\n  /**\r\n   * paginated Users\r\n   */\r\n  pUsers$: Observable<User[]>;\r\n\r\n  /**\r\n   * State of the master checkbox\r\n   */\r\n  masterChecked = false;\r\n  // State of all checkboxes\r\n  noUserChecked = true;\r\n  display = 'grid'; // 'grid' or 'list'\r\n  sortField = 'firstName';\r\n  sortOrder = 'asc';\r\n  /**\r\n   * Number of total users filtered\r\n   */\r\n  dataLength = 0;\r\n  pageSize = 10;\r\n  pageIndex = 0;\r\n  pageSizeOptions: number[] = [1, 2, 5, 10, 25, 100];\r\n  usersTotal: number;\r\n  searchTerm = '';\r\n\r\n  // MatPaginator Output\r\n  @ViewChildren(MatPaginator) paginators: QueryList<MatPaginator>;\r\n  pageEvent: PageEvent;\r\n\r\n  @ViewChildren(MatCheckbox) usersCheckboxes: QueryList<MatCheckbox>;\r\n\r\n  constructor(\r\n    private router: Router,\r\n    private assignmentService: AssignmentService,\r\n    private userService: UserService,\r\n    private partService: PartService,\r\n    private dialog: MatDialog\r\n  ) {}\r\n\r\n  ngOnInit() {\r\n    this.userService.data.subscribe((users) => {\r\n      this.users = users;\r\n      this.pUsers$ = this.userService.pUsers;\r\n    });\r\n\r\n    // TODO see if it is possible to get the last assignment of each user\r\n    // combineLatest([this.userService.data, this.assignmentService.data])\r\n    //   .subscribe(([users, assignments]) => {\r\n    //   if (users !== null && assignments !== null) {\r\n    //     this.assignmentService.groupAssignmentsByUser(assignments, users);\r\n    //     console.log(this.assignmentService.assignmentsByUser);\r\n    //   }\r\n    // });\r\n\r\n    this.getUsers();\r\n  }\r\n\r\n  ngAfterViewInit(): void {\r\n    // Handle paginators\r\n    let obsForPagination;\r\n    this.paginators.forEach((paginator) => {\r\n      merge(paginator.page, this.userService.data)\r\n        .pipe(\r\n          tap(() => {\r\n            this.getUsers(paginator);\r\n            this.pageSize = paginator.pageSize;\r\n            this.pageIndex = paginator.pageIndex;\r\n          })\r\n        )\r\n        .subscribe();\r\n    });\r\n\r\n    // Handle master checkbox\r\n\r\n    this.usersCheckboxes.first.change.subscribe(() => {\r\n      this.masterChecked = this.usersCheckboxes.first.checked;\r\n      this.noUserChecked = !this.masterChecked;\r\n    });\r\n\r\n    // this.getUsers();\r\n  }\r\n\r\n  async generateUsers() {\r\n    await this.userService.generateUsers(10, this.partService.getParts());\r\n  }\r\n\r\n  // addUser() {\r\n  //   this.userService.testOs();\r\n  // }\r\n\r\n  /**\r\n   * Fetch users from db and\r\n   * display them in the paginated grid\r\n   */\r\n  getUsers(paginator?: MatPaginator): void {\r\n    // Clear users list to display the loader\r\n    this.users = null;\r\n\r\n    this.userService.sortField = this.sortField;\r\n    this.userService.sortOrder = this.sortOrder;\r\n    this.userService.pageSize =\r\n      paginator !== undefined ? paginator.pageSize : this.pageSize;\r\n    this.userService.pageIndex =\r\n      paginator !== undefined ? paginator.pageIndex : this.pageIndex;\r\n    this.userService.searchTerm = this.searchTerm;\r\n\r\n    this.dataLength = this.userService.paginateUsers();\r\n\r\n    // Handle users checkboxes\r\n    // this.usersCheckboxes.forEach((c, index, usersCheckboxes) => {\r\n    //   // Do not handle the first (master)\r\n    //   if (index !== 0) {\r\n    //     c.change.subscribe(() => {\r\n    //       this.handleCheckboxes();\r\n    //     });\r\n    //   }\r\n    // });\r\n  }\r\n\r\n  /**\r\n   * Called on every toggle of checkboxes\r\n   * to toggle also the master checkbox and delete button\r\n   */\r\n  handleCheckboxes() {\r\n    // If all are checked check the master too\r\n    this.usersCheckboxes.first.checked = this.usersCheckboxes\r\n      .toArray()\r\n      .slice(1)\r\n      .every((checkbox, i) => checkbox.checked);\r\n    // this.masterChecked = this.usersCheckboxes.first.checked;\r\n    // If all are unchecked, disable the delete button\r\n    this.noUserChecked = !this.usersCheckboxes.some((_, i) => _.checked);\r\n  }\r\n\r\n  /**\r\n   * Perform a search from the filter input\r\n   */\r\n  searchByName(searchTerms: string) {\r\n    this.searchTerm = searchTerms;\r\n\r\n    this.pageIndex = 0; // Set the paginator pack to the first page\r\n    this.getUsers();\r\n  }\r\n\r\n  /**\r\n   * Improve performance of ngFor directive by specifying the key for uniqueness\r\n   * in case we need to update the list\r\n   * @see https://netbasal.com/angular-2-improve-performance-with-trackby-cc147b5104e5\r\n   *\r\n   */\r\n  trackById(index, item) {\r\n    return item._id;\r\n  }\r\n\r\n  // goto(event, user: any): void {\r\n  //   this.router.navigateByUrl(`user/details/${user._id}`);\r\n  // }\r\n\r\n  goto(path: string, user?: User): void {\r\n    if (user) {\r\n      this.userService.currentUser = user;\r\n    }\r\n\r\n    this.router.navigate([path]);\r\n  }\r\n\r\n  async delete(userId?: string | string[]) {\r\n    try {\r\n      await this.userService.deleteUser(userId);\r\n      // Refresh the list\r\n      this.getUsers();\r\n    } catch (error) {\r\n      throw error;\r\n    }\r\n  }\r\n\r\n  /**\r\n   * Return the list of checked users\r\n   * skipping the master checkbox\r\n   */\r\n  getCheckedUsers(): any[] {\r\n    return this.usersCheckboxes\r\n      .filter((c, i) => i !== 0 && c.checked) // List of checked\r\n      .map((c) => c.value); // Return the value (user)\r\n  }\r\n\r\n  // Handle view user detail button\r\n  async userDetailsModal(event: any, user: any) {\r\n    // display UserDetailComponent in a modal\r\n  }\r\n\r\n  // Handle user edit button\r\n  async userEditModal(event, user: any) {\r\n    // display UserEditComponent in a modal\r\n  }\r\n\r\n  switchDisplay() {\r\n    switch (this.display) {\r\n      case 'grid':\r\n        this.display = 'list';\r\n        break;\r\n      default:\r\n        this.display = 'grid';\r\n    }\r\n  }\r\n\r\n  /**\r\n   * open a dialog with details of a user\r\n   */\r\n  openView(evt: Event, user: User) {\r\n    this.dialog.open(UserDetailComponent, {\r\n      data: {\r\n        user: user,\r\n      },\r\n    });\r\n  }\r\n\r\n  // Call the sort field dialog\r\n  openSort(evt: Event): void {\r\n    const target = new ElementRef(evt.currentTarget);\r\n    const dialogRef = this.dialog.open(UserSortComponent, {\r\n      data: {\r\n        trigger: target,\r\n        sort: this.sortField,\r\n      },\r\n    });\r\n    dialogRef.afterClosed().subscribe((sort) => {\r\n      if (sort && this.sortField !== sort) {\r\n        this.sortField = sort;\r\n        this.getUsers();\r\n      }\r\n    });\r\n  }\r\n\r\n  async toggleSortOrder() {\r\n    this.sortOrder = this.sortOrder === 'asc' ? 'desc' : 'asc';\r\n    this.getUsers();\r\n  }\r\n}\r\n","<button\r\n  mat-fab\r\n  matTooltip=\"{{ 'add-user' | translate | titlecase }}\"\r\n  [routerLink]=\"['/users/add']\"\r\n  class=\"mat-fab-bottom-right\"\r\n>\r\n  <mat-icon>person_add</mat-icon>\r\n</button>\r\n\r\n<h2>{{ 'users' | translate | titlecase }}</h2>\r\n\r\n<!-- User search bar -->\r\n<div>\r\n  <app-user-filter (performedSearch)=\"searchByName($event)\"></app-user-filter>\r\n</div>\r\n\r\n<!-- Generate button -->\r\n<div fxLayout=\"row\" fxLayoutAlign=\"end start\">\r\n  <button\r\n    mat-raised-button\r\n    matTooltip=\"{{ 'generate-users' | translate | titlecase }}\"\r\n    (click)=\"generateUsers()\"\r\n    fxFlex=\"1\"\r\n    fxFlexAlign=\"right\"\r\n  >\r\n    <mat-icon>autorenew</mat-icon>\r\n  </button>\r\n</div>\r\n\r\n<!-- Table control bar -->\r\n<div fxLayout=\"row\" fxLayoutAlign=\"space-between stretch\">\r\n  <div fxFlex=\"30px\" fxFlexOffset=\"25px\" fxFlexAlign=\"center\">\r\n    <mat-checkbox\r\n      [checked]=\"masterChecked\"\r\n      matTooltip=\"{{ 'select-all' | translate }}\"\r\n    ></mat-checkbox>\r\n  </div>\r\n  <div fxFlexAlign=\"center\">\r\n    <button mat-icon-button (click)=\"openSort($event)\">\r\n      <mat-icon>sort</mat-icon>\r\n    </button>\r\n    <button mat-button disabled=\"true\">\r\n      {{ 'sort-by' | translate | titlecase }}\r\n      {{ sortField.replace('_', '-') | translate }}\r\n    </button>\r\n    <button\r\n      mat-icon-button\r\n      matTooltip=\"{{ 'sort-order' | translate }}\"\r\n      (click)=\"toggleSortOrder()\"\r\n    >\r\n      <mat-icon>\r\n        arrow_{{ sortOrder === 'asc' ? 'upward' : 'downward' }}\r\n      </mat-icon>\r\n    </button>\r\n  </div>\r\n  <div fxFlex=\"30px\" fxFlexAlign=\"center\">\r\n    <button\r\n      mat-icon-button\r\n      [disabled]=\"noUserChecked\"\r\n      matTooltip=\"{{ 'delete' | translate }}\"\r\n      appConfirm=\"{{ 'dialog.delete.confirmation.title' | translate }}\"\r\n      message=\"{{ 'dialog.delete.confirmation.message' | translate }}\"\r\n      cancelButton=\"{{ 'dialog.delete.confirmation.cancelButton' | translate }}\"\r\n      confirmButton=\"{{\r\n        'dialog.delete.confirmation.confirmButton' | translate\r\n      }}\"\r\n      (confirmed)=\"delete(getCheckedUsers())\"\r\n    >\r\n      <mat-icon>delete</mat-icon>\r\n    </button>\r\n  </div>\r\n  <div fxFlex></div>\r\n</div>\r\n\r\n<mat-paginator\r\n  [length]=\"dataLength\"\r\n  [pageSize]=\"pageSize\"\r\n  [pageIndex]=\"pageIndex\"\r\n  [pageSizeOptions]=\"pageSizeOptions\"\r\n  (page)=\"pageEvent = $event\"\r\n>\r\n</mat-paginator>\r\n\r\n<ng-template #loading>\r\n  <app-loader></app-loader>\r\n</ng-template>\r\n<!--<div *ngIf=\"users; else loading\">-->\r\n<div *ngIf=\"pUsers$ | async as pUsers; else loading\">\r\n  <mat-accordion multi=\"false\">\r\n    <mat-expansion-panel\r\n      hideToggle=\"true\"\r\n      #mep=\"matExpansionPanel\"\r\n      *ngFor=\"let user of pUsers; last as last; trackBy: trackById\"\r\n    >\r\n      <mat-expansion-panel-header\r\n        fxLayout=\"row\"\r\n        fxLayoutAlign=\"start stretch\"\r\n        fxLayoutGap\r\n      >\r\n        <mat-panel-title\r\n          fxFlex\r\n          fxFlex.lt-sm=\"100\"\r\n          fxFlexAlign=\"center\"\r\n          fxLayout=\"row\"\r\n          fxLayoutAlign=\"space-between stretch\"\r\n          fxLayoutGap=\"15px\"\r\n        >\r\n          <!-- Checkbox -->\r\n          <div fxFlex=\"25px\" fxFlexAlign=\"center\">\r\n            <mat-checkbox\r\n              name=\"userCheckbox\"\r\n              [value]=\"user._id\"\r\n              [checked]=\"masterChecked\"\r\n              (change)=\"handleCheckboxes()\"\r\n              (click)=\"$event.stopPropagation()\"\r\n            ></mat-checkbox>\r\n          </div>\r\n\r\n          <!-- Type icon -->\r\n          <div fxFlex=\"30px\">\r\n            <img class=\"genre-icon\" src=\"/assets/icon/{{ user.type }}.svg\" />\r\n          </div>\r\n\r\n          <!-- User name -->\r\n          <div fxFlex fxFlexAlign=\"center\">\r\n            {{ user.fullName }}\r\n          </div>\r\n        </mat-panel-title>\r\n        <mat-panel-description fxFlex fxFlexAlign=\"center\">\r\n          <div fxFlex fxHide.lt-sm *ngIf=\"user.phone\">\r\n            <mat-icon inline=\"true\">phone</mat-icon> {{ user.phone }}\r\n          </div>\r\n\r\n          <div fxFlex fxHide.lt-md *ngIf=\"user.email\">\r\n            <mat-icon inline=\"true\">mail_outline</mat-icon>\r\n            {{ user.email }}\r\n          </div>\r\n        </mat-panel-description>\r\n      </mat-expansion-panel-header>\r\n\r\n      <ng-template matExpansionPanelContent>\r\n        <!-- Lazy rendering -->\r\n\r\n        <div\r\n          fxLayout=\"row wrap\"\r\n          fxLayout.lt-sm=\"column\"\r\n          fxLayoutAlign=\"start stretch\"\r\n        >\r\n          <div fxFlex=\"45\">\r\n            <mat-icon inline=\"true\">person</mat-icon>\r\n            {{ user.type }}\r\n          </div>\r\n\r\n          <div fxFlex=\"45\" *ngIf=\"user.progress\">\r\n            <mat-icon inline=\"true\">info</mat-icon>\r\n            {{ user.progress }}\r\n          </div>\r\n\r\n          <div fxFlex fxHide.gt-xs *ngIf=\"user.phone\">\r\n            <mat-icon inline=\"true\">phone</mat-icon>\r\n            {{ user.phone }}\r\n          </div>\r\n          <div fxFlex fxHide.gt-sm *ngIf=\"user.email\">\r\n            <mat-icon inline=\"true\">mail_outline</mat-icon>\r\n            {{ user.email }}\r\n          </div>\r\n        </div>\r\n\r\n        <mat-chip-list\r\n          selectable=\"false\"\r\n          fxLayout=\"row\"\r\n          fxLayoutAlign=\"start stretch\"\r\n        >\r\n          <mat-chip\r\n            class=\"mat-chip-list-stacked\"\r\n            aria-orientation=\"vertical\"\r\n            *ngFor=\"let part of user.parts\"\r\n          >\r\n            {{ part.name | translate }}\r\n          </mat-chip>\r\n        </mat-chip-list>\r\n\r\n        <mat-action-row>\r\n          <button mat-button (click)=\"mep.expanded = false\">\r\n            <mat-icon inline=\"true\">close</mat-icon>\r\n\r\n            {{ 'close' | translate | titlecase }}\r\n          </button>\r\n          <button\r\n            mat-button\r\n            appConfirm=\"{{ 'dialog.delete.confirmation.title' | translate }}\"\r\n            message=\"{{ 'dialog.delete.confirmation.message' | translate }}\"\r\n            cancelButton=\"{{\r\n              'dialog.delete.confirmation.cancelButton' | translate\r\n            }}\"\r\n            confirmButton=\"{{\r\n              'dialog.delete.confirmation.confirmButton' | translate\r\n            }}\"\r\n            (confirmed)=\"delete([user._id])\"\r\n          >\r\n            <mat-icon inline=\"true\">delete</mat-icon>\r\n\r\n            {{ 'delete' | translate | titlecase }}\r\n          </button>\r\n          <button mat-button (click)=\"openView($event, user)\">\r\n            <mat-icon inline=\"true\">description</mat-icon>\r\n\r\n            {{ 'view' | translate | titlecase }}\r\n          </button>\r\n          <button mat-button (click)=\"goto('/users/edit', user)\">\r\n            <!-- [routerLink]=\"['/users/edit']\"\r\n           [state]=\"{ user: user }\" -->\r\n            <mat-icon inline=\"true\">edit</mat-icon>\r\n\r\n            {{ 'edit' | translate | titlecase }}\r\n          </button>\r\n        </mat-action-row>\r\n      </ng-template>\r\n    </mat-expansion-panel>\r\n  </mat-accordion>\r\n</div>\r\n<!--</div>-->\r\n\r\n<mat-paginator\r\n  [length]=\"dataLength\"\r\n  [pageSize]=\"pageSize\"\r\n  [pageIndex]=\"pageIndex\"\r\n  [pageSizeOptions]=\"pageSizeOptions\"\r\n  (page)=\"pageEvent = $event\"\r\n></mat-paginator>\r\n"],"mappings":"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"},"metadata":{},"sourceType":"module","externalDependencies":[]}