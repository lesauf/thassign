{"ast":null,"code":"import _asyncToGenerator from \"C:/Users/CSEG/Desktop/thassign/node_modules/@angular-devkit/build-angular/node_modules/@babel/runtime/helpers/esm/asyncToGenerator.js\";\nimport { EventEmitter } from '@angular/core';\nimport { UntypedFormGroup, UntypedFormControl } from '@angular/forms';\nimport { ControlMessagesComponent } from '@src/app/shared/components/control-messages/control-messages.component';\nimport { UserEditProvider } from '@src/app/modules/users/pages/user-edit/user-edit.provider';\n// import { any } from '../../../../../../server/src/modules/parts/part.model';\n// import { Part } from '../../../models/parts.schema';\n// import { UserModel } from '../../../../../server/src/modules/users/user.model';\nimport { User } from '@src/app/core/models/user/user.model';\nimport { ValidationService } from '@src/app/core/services/validation.service';\nimport * as i0 from \"@angular/core\";\nimport * as i1 from \"@angular/router\";\nimport * as i2 from \"@src/app/core/services/message.service\";\nimport * as i3 from \"@src/app/core/services/validation.service\";\nimport * as i4 from \"@src/app/core/services/part.service\";\nimport * as i5 from \"@ngx-translate/core\";\nimport * as i6 from \"@src/app/modules/users/user.service\";\nimport * as i7 from \"@src/app/modules/users/pages/user-edit/user-edit.provider\";\nimport * as i8 from \"@angular/common\";\nimport * as i9 from \"@angular/forms\";\nimport * as i10 from \"@angular/material/legacy-button\";\nimport * as i11 from \"@angular/material/legacy-checkbox\";\nimport * as i12 from \"@angular/material/legacy-chips\";\nimport * as i13 from \"@angular/material/divider\";\nimport * as i14 from \"@angular/material/legacy-form-field\";\nimport * as i15 from \"@angular/material/legacy-input\";\nimport * as i16 from \"@angular/material/legacy-radio\";\nimport * as i17 from \"@src/app/shared/components/control-messages/control-messages.component\";\nimport * as i18 from \"@src/app/shared/components/loader/loader.component\";\nfunction UserEditComponent_app_loader_5_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelement(0, \"app-loader\");\n  }\n}\nfunction UserEditComponent_form_6_div_52_fieldset_7_mat_chip_5_Template(rf, ctx) {\n  if (rf & 1) {\n    const _r11 = i0.ɵɵgetCurrentView();\n    i0.ɵɵelementStart(0, \"mat-chip\", 34);\n    i0.ɵɵlistener(\"click\", function UserEditComponent_form_6_div_52_fieldset_7_mat_chip_5_Template_mat_chip_click_0_listener() {\n      const restoredCtx = i0.ɵɵrestoreView(_r11);\n      const part_r9 = restoredCtx.$implicit;\n      const ctx_r10 = i0.ɵɵnextContext(4);\n      ctx_r10.togglePart(part_r9);\n      return i0.ɵɵresetView(ctx_r10.userForm.markAllAsTouched());\n    });\n    i0.ɵɵtext(1);\n    i0.ɵɵpipe(2, \"translate\");\n    i0.ɵɵelementEnd();\n  }\n  if (rf & 2) {\n    const part_r9 = ctx.$implicit;\n    const ctx_r8 = i0.ɵɵnextContext(4);\n    i0.ɵɵproperty(\"fxHide\", (part_r9 == null ? null : part_r9.byAnOverseer) && ctx_r8.overseerFieldsDisabled || (part_r9 == null ? null : part_r9.byABrother) && ctx_r8.manFieldsDisabled)(\"selected\", ctx_r8.partSelected(part_r9));\n    i0.ɵɵadvance(1);\n    i0.ɵɵtextInterpolate1(\" \", i0.ɵɵpipeBind1(2, 3, part_r9.name), \" \");\n  }\n}\nfunction UserEditComponent_form_6_div_52_fieldset_7_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelementStart(0, \"fieldset\", 25)(1, \"legend\");\n    i0.ɵɵtext(2);\n    i0.ɵɵpipe(3, \"titlecase\");\n    i0.ɵɵpipe(4, \"translate\");\n    i0.ɵɵelementEnd();\n    i0.ɵɵtemplate(5, UserEditComponent_form_6_div_52_fieldset_7_mat_chip_5_Template, 3, 5, \"mat-chip\", 33);\n    i0.ɵɵelementEnd();\n  }\n  if (rf & 2) {\n    const meeting_r6 = ctx.$implicit;\n    const meetingIndex_r7 = ctx.index;\n    const allPartsGrouped_r4 = i0.ɵɵnextContext().ngIf;\n    i0.ɵɵadvance(2);\n    i0.ɵɵtextInterpolate1(\" \", i0.ɵɵpipeBind1(3, 2, i0.ɵɵpipeBind1(4, 4, meeting_r6)), \" \");\n    i0.ɵɵadvance(3);\n    i0.ɵɵproperty(\"ngForOf\", allPartsGrouped_r4.parts[meetingIndex_r7]);\n  }\n}\nfunction UserEditComponent_form_6_div_52_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelementStart(0, \"div\", 30)(1, \"div\")(2, \"h3\");\n    i0.ɵɵtext(3);\n    i0.ɵɵpipe(4, \"titlecase\");\n    i0.ɵɵpipe(5, \"translate\");\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementStart(6, \"mat-chip-list\", 31);\n    i0.ɵɵtemplate(7, UserEditComponent_form_6_div_52_fieldset_7_Template, 6, 6, \"fieldset\", 32);\n    i0.ɵɵelementEnd()()();\n  }\n  if (rf & 2) {\n    const allPartsGrouped_r4 = ctx.ngIf;\n    i0.ɵɵadvance(3);\n    i0.ɵɵtextInterpolate(i0.ɵɵpipeBind1(4, 2, i0.ɵɵpipeBind1(5, 4, \"assignable-parts\")));\n    i0.ɵɵadvance(4);\n    i0.ɵɵproperty(\"ngForOf\", allPartsGrouped_r4.meetings);\n  }\n}\nfunction UserEditComponent_form_6_Template(rf, ctx) {\n  if (rf & 1) {\n    const _r14 = i0.ɵɵgetCurrentView();\n    i0.ɵɵelementStart(0, \"form\", 3, 4);\n    i0.ɵɵlistener(\"ngSubmit\", function UserEditComponent_form_6_Template_form_ngSubmit_0_listener() {\n      i0.ɵɵrestoreView(_r14);\n      const ctx_r13 = i0.ɵɵnextContext();\n      return i0.ɵɵresetView(ctx_r13.saveUser());\n    });\n    i0.ɵɵelementStart(2, \"div\", 5)(3, \"div\", 6)(4, \"mat-radio-group\", 7);\n    i0.ɵɵlistener(\"change\", function UserEditComponent_form_6_Template_mat_radio_group_change_4_listener($event) {\n      i0.ɵɵrestoreView(_r14);\n      const ctx_r15 = i0.ɵɵnextContext();\n      return i0.ɵɵresetView(ctx_r15.toggleManFields(\"genre\", $event));\n    });\n    i0.ɵɵelementStart(5, \"mat-radio-button\", 8);\n    i0.ɵɵtext(6);\n    i0.ɵɵpipe(7, \"translate\");\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementStart(8, \"mat-radio-button\", 9);\n    i0.ɵɵtext(9);\n    i0.ɵɵpipe(10, \"translate\");\n    i0.ɵɵelementEnd()();\n    i0.ɵɵelement(11, \"app-control-messages\", 10);\n    i0.ɵɵelementStart(12, \"mat-form-field\", 11);\n    i0.ɵɵelement(13, \"input\", 12);\n    i0.ɵɵpipe(14, \"translate\");\n    i0.ɵɵelementEnd();\n    i0.ɵɵelement(15, \"app-control-messages\", 10);\n    i0.ɵɵelementStart(16, \"mat-form-field\", 11);\n    i0.ɵɵelement(17, \"input\", 13);\n    i0.ɵɵpipe(18, \"translate\");\n    i0.ɵɵelementEnd();\n    i0.ɵɵelement(19, \"app-control-messages\", 10);\n    i0.ɵɵelementStart(20, \"mat-form-field\", 11);\n    i0.ɵɵelement(21, \"input\", 14);\n    i0.ɵɵpipe(22, \"translate\");\n    i0.ɵɵelementEnd();\n    i0.ɵɵelement(23, \"app-control-messages\", 10);\n    i0.ɵɵelementStart(24, \"mat-form-field\", 11);\n    i0.ɵɵelement(25, \"input\", 15);\n    i0.ɵɵpipe(26, \"translate\");\n    i0.ɵɵelementEnd();\n    i0.ɵɵelement(27, \"app-control-messages\", 10);\n    i0.ɵɵelementStart(28, \"mat-radio-group\", 16)(29, \"mat-radio-button\", 17);\n    i0.ɵɵtext(30);\n    i0.ɵɵpipe(31, \"translate\");\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementStart(32, \"mat-radio-button\", 18);\n    i0.ɵɵtext(33);\n    i0.ɵɵpipe(34, \"translate\");\n    i0.ɵɵelementEnd()()();\n    i0.ɵɵelementStart(35, \"div\", 19)(36, \"div\", 20);\n    i0.ɵɵtext(37, \"\\u00A0\");\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementStart(38, \"mat-checkbox\", 21);\n    i0.ɵɵlistener(\"change\", function UserEditComponent_form_6_Template_mat_checkbox_change_38_listener($event) {\n      i0.ɵɵrestoreView(_r14);\n      const ctx_r16 = i0.ɵɵnextContext();\n      return i0.ɵɵresetView(ctx_r16.toggleManFields(\"child\", $event));\n    });\n    i0.ɵɵtext(39);\n    i0.ɵɵpipe(40, \"translate\");\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementStart(41, \"mat-checkbox\", 22);\n    i0.ɵɵlistener(\"change\", function UserEditComponent_form_6_Template_mat_checkbox_change_41_listener($event) {\n      i0.ɵɵrestoreView(_r14);\n      const ctx_r17 = i0.ɵɵnextContext();\n      return i0.ɵɵresetView(ctx_r17.toggleManFields(\"baptized\", $event));\n    });\n    i0.ɵɵtext(42);\n    i0.ɵɵpipe(43, \"translate\");\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementStart(44, \"mat-checkbox\", 23);\n    i0.ɵɵlistener(\"change\", function UserEditComponent_form_6_Template_mat_checkbox_change_44_listener($event) {\n      i0.ɵɵrestoreView(_r14);\n      const ctx_r18 = i0.ɵɵnextContext();\n      return i0.ɵɵresetView(ctx_r18.toggleManFields(\"publisher\", $event));\n    });\n    i0.ɵɵtext(45);\n    i0.ɵɵpipe(46, \"translate\");\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementStart(47, \"mat-checkbox\", 24);\n    i0.ɵɵtext(48);\n    i0.ɵɵpipe(49, \"translate\");\n    i0.ɵɵelementEnd()();\n    i0.ɵɵelementStart(50, \"div\", 25);\n    i0.ɵɵtext(51, \" \\u00A0 \");\n    i0.ɵɵelementEnd();\n    i0.ɵɵtemplate(52, UserEditComponent_form_6_div_52_Template, 8, 6, \"div\", 26);\n    i0.ɵɵpipe(53, \"async\");\n    i0.ɵɵelementStart(54, \"div\", 25);\n    i0.ɵɵtext(55, \" \\u00A0 \");\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementStart(56, \"div\", 27)(57, \"button\", 28);\n    i0.ɵɵlistener(\"click\", function UserEditComponent_form_6_Template_button_click_57_listener() {\n      i0.ɵɵrestoreView(_r14);\n      const ctx_r19 = i0.ɵɵnextContext();\n      return i0.ɵɵresetView(ctx_r19.cancel());\n    });\n    i0.ɵɵtext(58);\n    i0.ɵɵpipe(59, \"titlecase\");\n    i0.ɵɵpipe(60, \"translate\");\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementStart(61, \"button\", 29);\n    i0.ɵɵtext(62);\n    i0.ɵɵpipe(63, \"titlecase\");\n    i0.ɵɵpipe(64, \"translate\");\n    i0.ɵɵelementEnd()();\n    i0.ɵɵelementStart(65, \"div\", 25);\n    i0.ɵɵtext(66, \" \\u00A0 \");\n    i0.ɵɵelementEnd()()();\n  }\n  if (rf & 2) {\n    const ctx_r1 = i0.ɵɵnextContext();\n    i0.ɵɵproperty(\"formGroup\", ctx_r1.userForm);\n    i0.ɵɵadvance(6);\n    i0.ɵɵtextInterpolate1(\" \", i0.ɵɵpipeBind1(7, 22, \"man\"), \" \");\n    i0.ɵɵadvance(3);\n    i0.ɵɵtextInterpolate1(\" \", i0.ɵɵpipeBind1(10, 24, \"woman\"), \" \");\n    i0.ɵɵadvance(2);\n    i0.ɵɵproperty(\"control\", ctx_r1.userForm.controls[\"genre\"]);\n    i0.ɵɵadvance(2);\n    i0.ɵɵpropertyInterpolate(\"placeholder\", i0.ɵɵpipeBind1(14, 26, \"first-name\"));\n    i0.ɵɵadvance(2);\n    i0.ɵɵproperty(\"control\", ctx_r1.userForm.controls[\"firstName\"]);\n    i0.ɵɵadvance(2);\n    i0.ɵɵpropertyInterpolate(\"placeholder\", i0.ɵɵpipeBind1(18, 28, \"last-name\"));\n    i0.ɵɵadvance(2);\n    i0.ɵɵproperty(\"control\", ctx_r1.userForm.controls[\"lastName\"]);\n    i0.ɵɵadvance(2);\n    i0.ɵɵpropertyInterpolate(\"placeholder\", i0.ɵɵpipeBind1(22, 30, \"phone\"));\n    i0.ɵɵadvance(2);\n    i0.ɵɵproperty(\"control\", ctx_r1.userForm.controls[\"phone\"]);\n    i0.ɵɵadvance(2);\n    i0.ɵɵpropertyInterpolate(\"placeholder\", i0.ɵɵpipeBind1(26, 32, \"email\"));\n    i0.ɵɵadvance(2);\n    i0.ɵɵproperty(\"control\", ctx_r1.userForm.controls[\"email\"]);\n    i0.ɵɵadvance(1);\n    i0.ɵɵproperty(\"hidden\", ctx_r1.overseerFieldsDisabled);\n    i0.ɵɵadvance(2);\n    i0.ɵɵtextInterpolate1(\" \", i0.ɵɵpipeBind1(31, 34, \"elder\"), \" \");\n    i0.ɵɵadvance(3);\n    i0.ɵɵtextInterpolate1(\" \", i0.ɵɵpipeBind1(34, 36, \"ministerial-servant\"), \" \");\n    i0.ɵɵadvance(6);\n    i0.ɵɵtextInterpolate1(\" \", i0.ɵɵpipeBind1(40, 38, \"child\"), \" \");\n    i0.ɵɵadvance(3);\n    i0.ɵɵtextInterpolate1(\" \", i0.ɵɵpipeBind1(43, 40, \"baptized\"), \" \");\n    i0.ɵɵadvance(3);\n    i0.ɵɵtextInterpolate1(\" \", i0.ɵɵpipeBind1(46, 42, \"publisher\"), \" \");\n    i0.ɵɵadvance(3);\n    i0.ɵɵtextInterpolate1(\" \", i0.ɵɵpipeBind1(49, 44, \"disabled\"), \" \");\n    i0.ɵɵadvance(4);\n    i0.ɵɵproperty(\"ngIf\", i0.ɵɵpipeBind1(53, 46, ctx_r1.allPartsGrouped$));\n    i0.ɵɵadvance(6);\n    i0.ɵɵtextInterpolate1(\" \", i0.ɵɵpipeBind1(59, 48, i0.ɵɵpipeBind1(60, 50, \"cancel\")), \" \");\n    i0.ɵɵadvance(4);\n    i0.ɵɵtextInterpolate1(\" \", i0.ɵɵpipeBind1(63, 52, i0.ɵɵpipeBind1(64, 54, \"save\")), \" \");\n  }\n}\n// import { translate } from './../../utils/common';\nexport class UserEditComponent {\n  constructor(route, router,\n  // private alertController: popoverController,\n  messageService, validationService, partService, translate, userService, userEditProvider) {\n    this.route = route;\n    this.router = router;\n    this.messageService = messageService;\n    this.validationService = validationService;\n    this.partService = partService;\n    this.translate = translate;\n    this.userService = userService;\n    this.userEditProvider = userEditProvider;\n    this.userEdited = new EventEmitter();\n  }\n  // controlMessagesComponent: ControlMessagesComponent\n  /**\r\n   * @see https://ultimatecourses.com/blog/angular-ngif-async-pipe\r\n   */\n  ngOnInit() {\n    var _this = this;\n    return _asyncToGenerator(function* () {\n      // this.getUser();\n      _this.user = _this.userService.currentUser;\n      if (!_this.user && _this.router.url !== '/users/add') {\n        _this.router.navigate(['users']);\n      } else if (_this.router.url === '/users/add') {\n        // AddUser form\n        _this.user = yield _this.userService.getUser();\n      }\n      _this.getUserForm();\n      _this.allParts = _this.partService.getParts();\n      _this.allPartsGrouped$ = _this.partService.getPartsGroupedByMeeting();\n      _this.controlMessagesComponent = new ControlMessagesComponent();\n    })();\n  }\n  getUserForm() {\n    this.userForm = new UntypedFormGroup({\n      _id: new UntypedFormControl(this.user._id),\n      firstName: new UntypedFormControl(this.user.firstName),\n      lastName: new UntypedFormControl(this.user.lastName),\n      congregation: new UntypedFormControl(this.user.congregation),\n      baptized: new UntypedFormControl(this.user.baptized),\n      publisher: new UntypedFormControl(this.user.publisher),\n      genre: new UntypedFormControl(this.user.genre),\n      child: new UntypedFormControl(this.user.child),\n      phone: new UntypedFormControl(this.user.phone),\n      email: new UntypedFormControl(this.user.email, ValidationService.emailValidator),\n      overseer: new UntypedFormControl(this.user.overseer),\n      disabled: new UntypedFormControl(this.user.disabled),\n      // familyMembers: new FormControl(this.user.familyMembers),\n      parts: new UntypedFormControl(this.user.parts),\n      ownerId: new UntypedFormControl(this.user.ownerId)\n      // assignments: new FormControl(this.user.assignments)\n    }, ValidationService.classValidator(new User()));\n    // console.log('User Parts: ', this.user.parts);\n    this.toggleManFields();\n    this.userEditProvider.getManFieldsDisable().subscribe(val => this.manFieldsDisabled = val);\n    this.userEditProvider.getOverseerFieldsDisable().subscribe(val => this.overseerFieldsDisabled = val);\n  }\n  showAlert() {\n    var _this2 = this;\n    return _asyncToGenerator(function* () {\n      const errorMessages = _this2.userForm.errors;\n      _this2.translate.get('form-error').subscribe(message => {\n        _this2.messageService.presentToast(message);\n      });\n      // alert(errorMessages);\n      // Show alert with error\n      // const alert = await this.alertCtrl.create({\n      //   header: 'form-error',\n      //   // subHeader: errorMessages,\n      //   buttons: ['OK']\n      // });\n      // return await alert.present();\n    })();\n  }\n\n  saveUser() {\n    var _this3 = this;\n    return _asyncToGenerator(function* () {\n      const saved = false;\n      // console.log('Before ', this.userForm.value);\n      // trigger validation\n      _this3.validationService.validateAllFormFields(_this3.userForm);\n      // console.log('After validation ', this.userForm.value);\n      try {\n        if (_this3.userForm.valid) {\n          // Make sure to create a deep copy of the form-model\n          // let result = this.user;\n          // console.log(typeof this.userForm.value);\n          const result = _this3.userService.createUser(_this3.userForm.value, _this3.partService.getParts());\n          // console.log('After: ', result);\n          // Do useful stuff with the gathered data\n          const insertedUser = yield _this3.userService.upsertUser(result, _this3.partService.getParts());\n          // TODO UserEdit check if save success\n          // Go to users list, passing dummy data to force reload\n          _this3.router.navigate(['users', {\n            dummyData: new Date().getTime()\n          }]);\n          _this3.translate.get('user-save-success').subscribe(message => {\n            _this3.messageService.presentToast(message);\n          });\n        } else {\n          _this3.showAlert();\n        }\n      } catch (error) {\n        throw error;\n      }\n      if (saved) {}\n    })();\n  }\n  cancel() {\n    var _this4 = this;\n    return _asyncToGenerator(function* () {\n      // this.userForm.get('firstName').value;\n      // Confirmation alert before closing the form\n      _this4.router.navigate(['users']);\n    })();\n  }\n  deleteUser() {\n    // TODO show confirmation alert\n    this.userService.deleteUser(this.user);\n    // Go to users list, passing dummy data to force reload\n    this.router.navigate(['users', {\n      dummyData: new Date().getTime()\n    }]);\n    // this.redirectTo('users');\n    this.translate.get('confirm-success').subscribe(message => {\n      this.messageService.presentToast(message);\n    });\n  }\n  /**\r\n   * Toggle disabled on fields concerning only men\r\n   * @param val <boolean> true: Disabled; false: Enabled\r\n   */\n  toggleManFields(field, event) {\n    if (this.userForm.value.genre === 'woman') {\n      this.userEditProvider.setManFieldsDisable(true);\n    } else {\n      this.userEditProvider.setManFieldsDisable(false);\n    }\n    if (this.userForm.value.genre === 'woman' || this.userForm.value.child ||\n    // (field === 'child' && event.value)\n    !this.userForm.value.baptized) {\n      this.userEditProvider.setOverseerFieldsDisable(true);\n    } else {\n      this.userEditProvider.setOverseerFieldsDisable(false);\n    }\n  }\n  /**\r\n   * Allow the user to just click on a part to select/deselect it\r\n   */\n  togglePart(part) {\n    let selectedParts = this.userForm.controls.parts.value;\n    let selectedPartIndex = -1;\n    try {\n      if (selectedParts !== null) {\n        // search\n        selectedPartIndex = selectedParts.findIndex((selectedPart, index, sParts) => selectedPart.name === part.name);\n      } else {\n        selectedParts = [];\n      }\n      if (selectedPartIndex !== -1) {\n        // part already selected, remove it\n        selectedParts.splice(selectedPartIndex, 1);\n      } else {\n        // Part not selected, add it\n        selectedParts.push(part);\n      }\n      this.userForm.controls.parts.patchValue(selectedParts);\n      this.userForm.get('parts').markAsTouched();\n      this.userForm.get('parts').updateValueAndValidity({\n        onlySelf: false,\n        emitEvent: true\n      });\n    } catch (error) {\n      throw error;\n    }\n  }\n  /**\r\n   * To populate the form, check if the part chip should be selected\r\n   */\n  partSelected(part) {\n    // console.log(part);\n    if (this.userForm.controls.parts.value !== null) {\n      const partValue = this.userForm.controls.parts.value;\n      return (\n        // TODO Remove when parts comes from Mongo\n        // partValue.find((selectedPart) => selectedPart.name === part.name) !==\n        // undefined\n        partValue.find(selectedPart => {\n          return selectedPart.name === part.name;\n        }) !== undefined\n      );\n    }\n    return false;\n  }\n  log(error) {\n    console.log(error);\n  }\n  /**\r\n   * Redirect and force page reload\r\n   * UNUSED\r\n   */\n  redirectTo(uri) {\n    this.router.navigateByUrl('/', {\n      skipLocationChange: true\n    }).then(() => this.router.navigate([uri]));\n  }\n  static #_ = this.ɵfac = function UserEditComponent_Factory(t) {\n    return new (t || UserEditComponent)(i0.ɵɵdirectiveInject(i1.ActivatedRoute), i0.ɵɵdirectiveInject(i1.Router), i0.ɵɵdirectiveInject(i2.MessageService), i0.ɵɵdirectiveInject(i3.ValidationService), i0.ɵɵdirectiveInject(i4.PartService), i0.ɵɵdirectiveInject(i5.TranslateService), i0.ɵɵdirectiveInject(i6.UserService), i0.ɵɵdirectiveInject(i7.UserEditProvider));\n  };\n  static #_2 = this.ɵcmp = /*@__PURE__*/i0.ɵɵdefineComponent({\n    type: UserEditComponent,\n    selectors: [[\"app-user-edit\"]],\n    outputs: {\n      userEdited: \"userEdited\"\n    },\n    features: [i0.ɵɵProvidersFeature([UserEditProvider])],\n    decls: 7,\n    vars: 5,\n    consts: [[\"fxLayout\", \"column\", \"fxLayoutGap\", \"10px\", \"fxLayoutAlign\", \"space-around stretch\"], [4, \"ngIf\"], [\"fxFlex\", \"95\", \"fxLayout\", \"row wrap\", \"fxLayoutAlign\", \"center start\", 3, \"formGroup\", \"ngSubmit\", 4, \"ngIf\"], [\"fxFlex\", \"95\", \"fxLayout\", \"row wrap\", \"fxLayoutAlign\", \"center start\", 3, \"formGroup\", \"ngSubmit\"], [\"userEditForm\", \"\"], [\"fxFlex\", \"100\", \"fxLayoutGap\", \"25px\", \"fxLayout\", \"row wrap\", \"fxLayoutAlign\", \"center start\"], [\"fxFlex\", \"80\", \"fxFlex.lt-md\", \"75\", \"fxFlex.lt-sm\", \"95\", \"fxLayout\", \"column\", \"fxLayoutAlign\", \"center start\"], [\"fxFlex\", \"row\", \"fxLayoutAlign\", \"start stretch\", \"fxLayoutGap\", \"15px\", \"labelPosition\", \"before\", \"formControlName\", \"genre\", 3, \"change\"], [\"value\", \"man\", \"name\", \"genre\"], [\"fxFlex\", \"\", \"value\", \"woman\", \"name\", \"genre\"], [3, \"control\"], [\"fxFill\", \"\"], [\"matInput\", \"\", \"autocomplete\", \"off\", \"formControlName\", \"firstName\", \"required\", \"\", 3, \"placeholder\"], [\"matInput\", \"\", \"autocomplete\", \"off\", \"formControlName\", \"lastName\", 3, \"placeholder\"], [\"matInput\", \"\", \"autocomplete\", \"off\", \"formControlName\", \"phone\", 3, \"placeholder\"], [\"matInput\", \"\", \"type\", \"email\", \"autocomplete\", \"off\", \"formControlName\", \"email\", 3, \"placeholder\"], [\"labelPosition\", \"before\", \"fxFlex\", \"row wrap\", \"fxLayoutGap\", \"15px\", \"formControlName\", \"overseer\", 3, \"hidden\"], [\"value\", \"elder\", \"name\", \"overseer\"], [\"value\", \"ministerial-servant\", \"name\", \"overseer\"], [\"fxFlex\", \"10\", \"fxFlex.lt-md\", \"15\", \"fxFlex.xs\", \"95\", \"fxLayout\", \"column\", \"fxLayout.lt-sm\", \"row wrap\", \"fxLayoutGap.gt-sm\", \"10px\", \"fxLayoutAlign\", \"space-between start\", \"fxLayoutAlign.xs\", \"end center\"], [\"fxFlex\", \"\"], [\"fxFlex.lt-sm\", \"45\", \"labelPosition\", \"after\", \"formControlName\", \"child\", 3, \"change\"], [\"fxFlex.lt-sm\", \"45\", \"labelPosition\", \"after\", \"formControlName\", \"baptized\", 3, \"change\"], [\"fxFlex.lt-sm\", \"45\", \"labelPosition\", \"after\", \"formControlName\", \"publisher\", 3, \"change\"], [\"fxFlex.lt-sm\", \"45\", \"labelPosition\", \"after\", \"formControlName\", \"disabled\"], [\"fxFlex\", \"100\"], [\"fxFlex\", \"90\", 4, \"ngIf\"], [\"fxFlex\", \"100\", \"fxLayout\", \"row\", \"fxLayoutAlign\", \"space-around stretch\"], [\"type\", \"button\", \"mat-raised-button\", \"\", 3, \"click\"], [\"type\", \"submit\", \"mat-raised-button\", \"\", \"color\", \"primary\"], [\"fxFlex\", \"90\"], [\"multiple\", \"true\", \"fxLayout\", \"row\"], [\"fxFlex\", \"100\", 4, \"ngFor\", \"ngForOf\"], [3, \"fxHide\", \"selected\", \"click\", 4, \"ngFor\", \"ngForOf\"], [3, \"fxHide\", \"selected\", \"click\"]],\n    template: function UserEditComponent_Template(rf, ctx) {\n      if (rf & 1) {\n        i0.ɵɵelementStart(0, \"h2\");\n        i0.ɵɵtext(1);\n        i0.ɵɵpipe(2, \"translate\");\n        i0.ɵɵelementEnd();\n        i0.ɵɵelement(3, \"mat-divider\");\n        i0.ɵɵelementStart(4, \"div\", 0);\n        i0.ɵɵtemplate(5, UserEditComponent_app_loader_5_Template, 1, 0, \"app-loader\", 1);\n        i0.ɵɵtemplate(6, UserEditComponent_form_6_Template, 67, 56, \"form\", 2);\n        i0.ɵɵelementEnd();\n      }\n      if (rf & 2) {\n        i0.ɵɵadvance(1);\n        i0.ɵɵtextInterpolate(i0.ɵɵpipeBind1(2, 3, \"user-form-title\"));\n        i0.ɵɵadvance(4);\n        i0.ɵɵproperty(\"ngIf\", !ctx.userForm);\n        i0.ɵɵadvance(1);\n        i0.ɵɵproperty(\"ngIf\", ctx.userForm);\n      }\n    },\n    dependencies: [i8.NgForOf, i8.NgIf, i9.ɵNgNoValidate, i9.DefaultValueAccessor, i9.NgControlStatus, i9.NgControlStatusGroup, i9.RequiredValidator, i10.MatLegacyButton, i11.MatLegacyCheckbox, i12.MatLegacyChipList, i12.MatLegacyChip, i13.MatDivider, i14.MatLegacyFormField, i15.MatLegacyInput, i16.MatLegacyRadioGroup, i16.MatLegacyRadioButton, i9.FormGroupDirective, i9.FormControlName, i17.ControlMessagesComponent, i18.LoaderComponent, i8.AsyncPipe, i8.TitleCasePipe],\n    styles: [\"/*# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbXSwibmFtZXMiOltdLCJtYXBwaW5ncyI6IiIsImZpbGUiOiJ1c2VyLWVkaXQuY29tcG9uZW50LnNjc3MifQ== */\\n/*# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly8uL3NyYy9hcHAvbW9kdWxlcy91c2Vycy9wYWdlcy91c2VyLWVkaXQvdXNlci1lZGl0LmNvbXBvbmVudC5zY3NzIl0sIm5hbWVzIjpbXSwibWFwcGluZ3MiOiI7QUFDQSx3S0FBd0siLCJzb3VyY2VSb290IjoiIn0= */\"]\n  });\n}","map":{"version":3,"names":["EventEmitter","UntypedFormGroup","UntypedFormControl","ControlMessagesComponent","UserEditProvider","User","ValidationService","i0","ɵɵelement","ɵɵelementStart","ɵɵlistener","UserEditComponent_form_6_div_52_fieldset_7_mat_chip_5_Template_mat_chip_click_0_listener","restoredCtx","ɵɵrestoreView","_r11","part_r9","$implicit","ctx_r10","ɵɵnextContext","togglePart","ɵɵresetView","userForm","markAllAsTouched","ɵɵtext","ɵɵelementEnd","ɵɵproperty","byAnOverseer","ctx_r8","overseerFieldsDisabled","byABrother","manFieldsDisabled","partSelected","ɵɵadvance","ɵɵtextInterpolate1","ɵɵpipeBind1","name","ɵɵtemplate","UserEditComponent_form_6_div_52_fieldset_7_mat_chip_5_Template","meeting_r6","allPartsGrouped_r4","parts","meetingIndex_r7","UserEditComponent_form_6_div_52_fieldset_7_Template","ɵɵtextInterpolate","meetings","UserEditComponent_form_6_Template_form_ngSubmit_0_listener","_r14","ctx_r13","saveUser","UserEditComponent_form_6_Template_mat_radio_group_change_4_listener","$event","ctx_r15","toggleManFields","UserEditComponent_form_6_Template_mat_checkbox_change_38_listener","ctx_r16","UserEditComponent_form_6_Template_mat_checkbox_change_41_listener","ctx_r17","UserEditComponent_form_6_Template_mat_checkbox_change_44_listener","ctx_r18","UserEditComponent_form_6_div_52_Template","UserEditComponent_form_6_Template_button_click_57_listener","ctx_r19","cancel","ctx_r1","controls","ɵɵpropertyInterpolate","allPartsGrouped$","UserEditComponent","constructor","route","router","messageService","validationService","partService","translate","userService","userEditProvider","userEdited","ngOnInit","_this","_asyncToGenerator","user","currentUser","url","navigate","getUser","getUserForm","allParts","getParts","getPartsGroupedByMeeting","controlMessagesComponent","_id","firstName","lastName","congregation","baptized","publisher","genre","child","phone","email","emailValidator","overseer","disabled","ownerId","classValidator","getManFieldsDisable","subscribe","val","getOverseerFieldsDisable","showAlert","_this2","errorMessages","errors","get","message","presentToast","_this3","saved","validateAllFormFields","valid","result","createUser","value","insertedUser","upsertUser","dummyData","Date","getTime","error","_this4","deleteUser","field","event","setManFieldsDisable","setOverseerFieldsDisable","part","selectedParts","selectedPartIndex","findIndex","selectedPart","index","sParts","splice","push","patchValue","markAsTouched","updateValueAndValidity","onlySelf","emitEvent","partValue","find","undefined","log","console","redirectTo","uri","navigateByUrl","skipLocationChange","then","_","ɵɵdirectiveInject","i1","ActivatedRoute","Router","i2","MessageService","i3","i4","PartService","i5","TranslateService","i6","UserService","i7","_2","selectors","outputs","features","ɵɵProvidersFeature","decls","vars","consts","template","UserEditComponent_Template","rf","ctx","UserEditComponent_app_loader_5_Template","UserEditComponent_form_6_Template"],"sources":["C:\\Users\\CSEG\\Desktop\\thassign\\src\\app\\modules\\users\\pages\\user-edit\\user-edit.component.ts","C:\\Users\\CSEG\\Desktop\\thassign\\src\\app\\modules\\users\\pages\\user-edit\\user-edit.component.html"],"sourcesContent":["import { TranslateService } from '@ngx-translate/core';\r\nimport {\r\n  Component,\r\n  Input,\r\n  Output,\r\n  EventEmitter,\r\n  OnInit,\r\n  NgZone,\r\n} from '@angular/core';\r\nimport {\r\n  UntypedFormGroup,\r\n  Validators,\r\n  FormBuilder,\r\n  UntypedFormControl,\r\n  FormArray,\r\n} from '@angular/forms';\r\nimport { Router, ActivatedRoute, ParamMap } from '@angular/router';\r\nimport { switchMap, defaultIfEmpty } from 'rxjs/operators';\r\n\r\nimport { ControlMessagesComponent } from '@src/app/shared/components/control-messages/control-messages.component';\r\nimport { UserEditProvider } from '@src/app/modules/users/pages/user-edit/user-edit.provider';\r\n\r\n// import { any } from '../../../../../../server/src/modules/parts/part.model';\r\n// import { Part } from '../../../models/parts.schema';\r\n// import { UserModel } from '../../../../../server/src/modules/users/user.model';\r\nimport { User } from '@src/app/core/models/user/user.model';\r\nimport { ValidationService } from '@src/app/core/services/validation.service';\r\nimport { PartService } from '@src/app/core/services/part.service';\r\nimport { UserService } from '@src/app/modules/users/user.service';\r\nimport { MessageService } from '@src/app/core/services/message.service';\r\nimport { Part } from '@src/app/core/models/part/part.model';\r\n// import { translate } from './../../utils/common';\r\n\r\n@Component({\r\n  selector: 'app-user-edit',\r\n  templateUrl: './user-edit.component.html',\r\n  styleUrls: ['./user-edit.component.scss'],\r\n  providers: [UserEditProvider],\r\n})\r\nexport class UserEditComponent implements OnInit {\r\n  /**\r\n   * User on which we are working, creating or editing\r\n   */\r\n  user: any;\r\n\r\n  /**\r\n   * List of all available parts\r\n   */\r\n  allParts: Part[];\r\n\r\n  /**\r\n   * All parts grouped by meeting\r\n   */\r\n  allPartsGrouped$: Promise<{ parts: any; meetings: any }>;\r\n\r\n  controlMessagesComponent: ControlMessagesComponent;\r\n\r\n  @Output()\r\n  userEdited = new EventEmitter<object>();\r\n  selectedUser: any;\r\n  userForm: UntypedFormGroup;\r\n  overseerFieldsDisabled: boolean;\r\n  manFieldsDisabled: boolean;\r\n\r\n  constructor(\r\n    private route: ActivatedRoute,\r\n    private router: Router,\r\n    // private alertController: popoverController,\r\n    private messageService: MessageService,\r\n    public validationService: ValidationService,\r\n    private partService: PartService,\r\n    private translate: TranslateService,\r\n    private userService: UserService,\r\n    private userEditProvider: UserEditProvider\r\n  ) {}\r\n\r\n  // controlMessagesComponent: ControlMessagesComponent\r\n  /**\r\n   * @see https://ultimatecourses.com/blog/angular-ngif-async-pipe\r\n   */\r\n  async ngOnInit() {\r\n    // this.getUser();\r\n    this.user = this.userService.currentUser;\r\n\r\n    if (!this.user && this.router.url !== '/users/add') {\r\n      this.router.navigate(['users']);\r\n    } else if (this.router.url === '/users/add') {\r\n      // AddUser form\r\n      this.user = await this.userService.getUser();\r\n    }\r\n\r\n    this.getUserForm();\r\n\r\n    this.allParts = this.partService.getParts();\r\n\r\n    this.allPartsGrouped$ = this.partService.getPartsGroupedByMeeting();\r\n    this.controlMessagesComponent = new ControlMessagesComponent();\r\n  }\r\n\r\n  getUserForm(): void {\r\n    this.userForm = new UntypedFormGroup(\r\n      {\r\n        _id: new UntypedFormControl(this.user._id),\r\n        firstName: new UntypedFormControl(this.user.firstName),\r\n        lastName: new UntypedFormControl(this.user.lastName),\r\n        congregation: new UntypedFormControl(this.user.congregation),\r\n        baptized: new UntypedFormControl(this.user.baptized),\r\n        publisher: new UntypedFormControl(this.user.publisher),\r\n        genre: new UntypedFormControl(this.user.genre),\r\n        child: new UntypedFormControl(this.user.child),\r\n        phone: new UntypedFormControl(this.user.phone),\r\n        email: new UntypedFormControl(\r\n          this.user.email,\r\n          ValidationService.emailValidator\r\n        ),\r\n        overseer: new UntypedFormControl(this.user.overseer),\r\n        disabled: new UntypedFormControl(this.user.disabled),\r\n        // familyMembers: new FormControl(this.user.familyMembers),\r\n        parts: new UntypedFormControl(this.user.parts),\r\n        ownerId: new UntypedFormControl(this.user.ownerId),\r\n        // assignments: new FormControl(this.user.assignments)\r\n      },\r\n      ValidationService.classValidator(new User())\r\n    );\r\n\r\n    // console.log('User Parts: ', this.user.parts);\r\n\r\n    this.toggleManFields();\r\n\r\n    this.userEditProvider\r\n      .getManFieldsDisable()\r\n      .subscribe((val) => (this.manFieldsDisabled = val));\r\n\r\n    this.userEditProvider\r\n      .getOverseerFieldsDisable()\r\n      .subscribe((val) => (this.overseerFieldsDisabled = val));\r\n  }\r\n\r\n  async showAlert() {\r\n    const errorMessages = this.userForm.errors;\r\n\r\n    this.translate.get('form-error').subscribe((message) => {\r\n      this.messageService.presentToast(message);\r\n    });\r\n    // alert(errorMessages);\r\n    // Show alert with error\r\n    // const alert = await this.alertCtrl.create({\r\n    //   header: 'form-error',\r\n    //   // subHeader: errorMessages,\r\n    //   buttons: ['OK']\r\n    // });\r\n\r\n    // return await alert.present();\r\n  }\r\n\r\n  async saveUser() {\r\n    const saved = false;\r\n    // console.log('Before ', this.userForm.value);\r\n    // trigger validation\r\n    this.validationService.validateAllFormFields(this.userForm);\r\n\r\n    // console.log('After validation ', this.userForm.value);\r\n    try {\r\n      if (this.userForm.valid) {\r\n        // Make sure to create a deep copy of the form-model\r\n        // let result = this.user;\r\n        // console.log(typeof this.userForm.value);\r\n        const result = this.userService.createUser(\r\n          this.userForm.value,\r\n          this.partService.getParts()\r\n        ) as User;\r\n\r\n        // console.log('After: ', result);\r\n        // Do useful stuff with the gathered data\r\n        const insertedUser = await this.userService.upsertUser(\r\n          result,\r\n          this.partService.getParts()\r\n        );\r\n\r\n        // TODO UserEdit check if save success\r\n        // Go to users list, passing dummy data to force reload\r\n        this.router.navigate(['users', { dummyData: new Date().getTime() }]);\r\n\r\n        this.translate.get('user-save-success').subscribe((message) => {\r\n          this.messageService.presentToast(message);\r\n        });\r\n      } else {\r\n        this.showAlert();\r\n      }\r\n    } catch (error) {\r\n      throw error;\r\n    }\r\n\r\n    if (saved) {\r\n    }\r\n  }\r\n\r\n  async cancel() {\r\n    // this.userForm.get('firstName').value;\r\n\r\n    // Confirmation alert before closing the form\r\n\r\n    this.router.navigate(['users']);\r\n  }\r\n\r\n  deleteUser() {\r\n    // TODO show confirmation alert\r\n    this.userService.deleteUser(this.user);\r\n\r\n    // Go to users list, passing dummy data to force reload\r\n    this.router.navigate(['users', { dummyData: new Date().getTime() }]);\r\n    // this.redirectTo('users');\r\n\r\n    this.translate.get('confirm-success').subscribe((message) => {\r\n      this.messageService.presentToast(message);\r\n    });\r\n  }\r\n\r\n  /**\r\n   * Toggle disabled on fields concerning only men\r\n   * @param val <boolean> true: Disabled; false: Enabled\r\n   */\r\n  toggleManFields(field?, event?) {\r\n    if (this.userForm.value.genre === 'woman') {\r\n      this.userEditProvider.setManFieldsDisable(true);\r\n    } else {\r\n      this.userEditProvider.setManFieldsDisable(false);\r\n    }\r\n\r\n    if (\r\n      this.userForm.value.genre === 'woman' ||\r\n      this.userForm.value.child || // (field === 'child' && event.value)\r\n      !this.userForm.value.baptized\r\n    ) {\r\n      this.userEditProvider.setOverseerFieldsDisable(true);\r\n    } else {\r\n      this.userEditProvider.setOverseerFieldsDisable(false);\r\n    }\r\n  }\r\n\r\n  /**\r\n   * Allow the user to just click on a part to select/deselect it\r\n   */\r\n  togglePart(part: Part): void {\r\n    let selectedParts: Part[] = this.userForm.controls.parts.value;\r\n    let selectedPartIndex = -1;\r\n\r\n    try {\r\n      if (selectedParts !== null) {\r\n        // search\r\n        selectedPartIndex = selectedParts.findIndex(\r\n          (selectedPart, index, sParts) => selectedPart.name === part.name\r\n        );\r\n      } else {\r\n        selectedParts = [];\r\n      }\r\n\r\n      if (selectedPartIndex !== -1) {\r\n        // part already selected, remove it\r\n        selectedParts.splice(selectedPartIndex, 1);\r\n      } else {\r\n        // Part not selected, add it\r\n        selectedParts.push(part);\r\n      }\r\n      this.userForm.controls.parts.patchValue(selectedParts);\r\n\r\n      this.userForm.get('parts').markAsTouched();\r\n\r\n      this.userForm.get('parts').updateValueAndValidity({\r\n        onlySelf: false,\r\n        emitEvent: true,\r\n      });\r\n    } catch (error) {\r\n      throw error;\r\n    }\r\n  }\r\n\r\n  /**\r\n   * To populate the form, check if the part chip should be selected\r\n   */\r\n  partSelected(part: Part): boolean {\r\n    // console.log(part);\r\n\r\n    if (this.userForm.controls.parts.value !== null) {\r\n      const partValue = this.userForm.controls.parts.value;\r\n\r\n      return (\r\n        // TODO Remove when parts comes from Mongo\r\n        // partValue.find((selectedPart) => selectedPart.name === part.name) !==\r\n        // undefined\r\n        partValue.find((selectedPart) => {\r\n          return selectedPart.name === part.name;\r\n        }) !== undefined\r\n      );\r\n    }\r\n\r\n    return false;\r\n  }\r\n\r\n  log(error) {\r\n    console.log(error);\r\n  }\r\n\r\n  /**\r\n   * Redirect and force page reload\r\n   * UNUSED\r\n   */\r\n  redirectTo(uri) {\r\n    this.router\r\n      .navigateByUrl('/', { skipLocationChange: true })\r\n      .then(() => this.router.navigate([uri]));\r\n  }\r\n}\r\n","<h2>{{ \"user-form-title\" | translate }}</h2>\r\n\r\n<mat-divider></mat-divider>\r\n\r\n<div fxLayout=\"column\" fxLayoutGap=\"10px\" fxLayoutAlign=\"space-around stretch\">\r\n  <app-loader *ngIf=\"!userForm\"> </app-loader>\r\n\r\n  <form\r\n    fxFlex=\"95\"\r\n    fxLayout=\"row wrap\"\r\n    fxLayoutAlign=\"center start\"\r\n    #userEditForm\r\n    *ngIf=\"userForm\"\r\n    [formGroup]=\"userForm\"\r\n    (ngSubmit)=\"saveUser()\"\r\n  >\r\n    <div\r\n      fxFlex=\"100\"\r\n      fxLayoutGap=\"25px\"\r\n      fxLayout=\"row wrap\"\r\n      fxLayoutAlign=\"center start\"\r\n    >\r\n      <!-- Left column -->\r\n      <div\r\n        fxFlex=\"80\"\r\n        fxFlex.lt-md=\"75\"\r\n        fxFlex.lt-sm=\"95\"\r\n        fxLayout=\"column\"\r\n        fxLayoutAlign=\"center start\"\r\n      >\r\n        <!-- Genre -->\r\n        <mat-radio-group\r\n          fxFlex=\"row\"\r\n          fxLayoutAlign=\"start stretch\"\r\n          fxLayoutGap=\"15px\"\r\n          labelPosition=\"before\"\r\n          formControlName=\"genre\"\r\n          (change)=\"toggleManFields('genre', $event)\"\r\n        >\r\n          <mat-radio-button value=\"man\" name=\"genre\">\r\n            {{ \"man\" | translate }}\r\n          </mat-radio-button>\r\n          <mat-radio-button fxFlex value=\"woman\" name=\"genre\">\r\n            {{ \"woman\" | translate }}\r\n          </mat-radio-button>\r\n        </mat-radio-group>\r\n        <app-control-messages [control]=\"userForm.controls['genre']\">\r\n        </app-control-messages>\r\n        <!-- First name -->\r\n        <mat-form-field fxFill>\r\n          <input\r\n            matInput\r\n            autocomplete=\"off\"\r\n            placeholder=\"{{ 'first-name' | translate }}\"\r\n            formControlName=\"firstName\"\r\n            required\r\n          />\r\n        </mat-form-field>\r\n        <app-control-messages [control]=\"userForm.controls['firstName']\">\r\n        </app-control-messages>\r\n        <!-- Last name -->\r\n        <mat-form-field fxFill>\r\n          <input\r\n            matInput\r\n            autocomplete=\"off\"\r\n            placeholder=\"{{ 'last-name' | translate }}\"\r\n            formControlName=\"lastName\"\r\n          />\r\n        </mat-form-field>\r\n        <app-control-messages [control]=\"userForm.controls['lastName']\">\r\n        </app-control-messages>\r\n        <!-- Phone -->\r\n        <mat-form-field fxFill>\r\n          <input\r\n            matInput\r\n            autocomplete=\"off\"\r\n            placeholder=\"{{ 'phone' | translate }}\"\r\n            formControlName=\"phone\"\r\n          />\r\n        </mat-form-field>\r\n        <app-control-messages [control]=\"userForm.controls['phone']\">\r\n        </app-control-messages>\r\n        <!-- Email -->\r\n        <mat-form-field fxFill>\r\n          <input\r\n            matInput\r\n            type=\"email\"\r\n            autocomplete=\"off\"\r\n            placeholder=\"{{ 'email' | translate }}\"\r\n            formControlName=\"email\"\r\n          />\r\n        </mat-form-field>\r\n        <app-control-messages [control]=\"userForm.controls['email']\">\r\n        </app-control-messages>\r\n        <!-- Overseer -->\r\n        <mat-radio-group\r\n          labelPosition=\"before\"\r\n          fxFlex=\"row wrap\"\r\n          fxLayoutGap=\"15px\"\r\n          formControlName=\"overseer\"\r\n          [hidden]=\"overseerFieldsDisabled\"\r\n        >\r\n          <mat-radio-button value=\"elder\" name=\"overseer\">\r\n            {{ \"elder\" | translate }}\r\n          </mat-radio-button>\r\n          <mat-radio-button value=\"ministerial-servant\" name=\"overseer\">\r\n            {{ \"ministerial-servant\" | translate }}\r\n          </mat-radio-button>\r\n        </mat-radio-group>\r\n      </div>\r\n\r\n      <!-- RIGHT COLUMN -->\r\n      <div\r\n        fxFlex=\"10\"\r\n        fxFlex.lt-md=\"15\"\r\n        fxFlex.xs=\"95\"\r\n        fxLayout=\"column\"\r\n        fxLayout.lt-sm=\"row wrap\"\r\n        fxLayoutGap.gt-sm=\"10px\"\r\n        fxLayoutAlign=\"space-between start\"\r\n        fxLayoutAlign.xs=\"end center\"\r\n      >\r\n        <div fxFlex>&nbsp;</div>\r\n        <!-- Child -->\r\n        <mat-checkbox\r\n          fxFlex.lt-sm=\"45\"\r\n          labelPosition=\"after\"\r\n          formControlName=\"child\"\r\n          (change)=\"toggleManFields('child', $event)\"\r\n        >\r\n          {{ \"child\" | translate }}\r\n        </mat-checkbox>\r\n        <!-- baptized -->\r\n        <mat-checkbox\r\n          fxFlex.lt-sm=\"45\"\r\n          labelPosition=\"after\"\r\n          formControlName=\"baptized\"\r\n          (change)=\"toggleManFields('baptized', $event)\"\r\n        >\r\n          {{ \"baptized\" | translate }}\r\n        </mat-checkbox>\r\n        <!-- publisher -->\r\n        <mat-checkbox\r\n          fxFlex.lt-sm=\"45\"\r\n          labelPosition=\"after\"\r\n          formControlName=\"publisher\"\r\n          (change)=\"toggleManFields('publisher', $event)\"\r\n        >\r\n          {{ \"publisher\" | translate }}\r\n        </mat-checkbox>\r\n        <!-- disabled -->\r\n        <mat-checkbox\r\n          fxFlex.lt-sm=\"45\"\r\n          labelPosition=\"after\"\r\n          formControlName=\"disabled\"\r\n        >\r\n          {{ \"disabled\" | translate }}\r\n        </mat-checkbox>\r\n      </div>\r\n      <!-- /Right column -->\r\n\r\n      <div fxFlex=\"100\">\r\n        &nbsp;\r\n        <!-- spacer -->\r\n      </div>\r\n\r\n      <!-- Part Chips -->\r\n\r\n      <div fxFlex=\"90\" *ngIf=\"allPartsGrouped$ | async as allPartsGrouped\">\r\n        <div>\r\n          <!-- Midweek parts -->\r\n          <h3>{{ \"assignable-parts\" | translate | titlecase }}</h3>\r\n          <mat-chip-list multiple=\"true\" fxLayout=\"row\">\r\n            <fieldset\r\n              fxFlex=\"100\"\r\n              *ngFor=\"\r\n                let meeting of allPartsGrouped.meetings;\r\n                let meetingIndex = index\r\n              \"\r\n            >\r\n              <legend>\r\n                {{ meeting | translate | titlecase }}\r\n              </legend>\r\n              <mat-chip\r\n                [fxHide]=\"\r\n                  (part?.byAnOverseer && overseerFieldsDisabled) ||\r\n                  (part?.byABrother && manFieldsDisabled)\r\n                \"\r\n                *ngFor=\"let part of allPartsGrouped.parts[meetingIndex]\"\r\n                [selected]=\"partSelected(part)\"\r\n                (click)=\"togglePart(part); userForm.markAllAsTouched()\"\r\n              >\r\n                {{ part.name | translate }}\r\n              </mat-chip>\r\n            </fieldset>\r\n          </mat-chip-list>\r\n        </div>\r\n      </div>\r\n\r\n      <div fxFlex=\"100\">\r\n        &nbsp;\r\n        <!-- spacer -->\r\n      </div>\r\n\r\n      <!-- BUTTONS -->\r\n      <div fxFlex=\"100\" fxLayout=\"row\" fxLayoutAlign=\"space-around stretch\">\r\n        <button type=\"button\" mat-raised-button (click)=\"cancel()\">\r\n          {{ \"cancel\" | translate | titlecase }}\r\n        </button>\r\n        <button type=\"submit\" mat-raised-button color=\"primary\">\r\n          {{ \"save\" | translate | titlecase }}\r\n        </button>\r\n      </div>\r\n\r\n      <div fxFlex=\"100\">\r\n        &nbsp;\r\n        <!-- spacer -->\r\n      </div>\r\n    </div>\r\n  </form>\r\n</div>\r\n"],"mappings":"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"},"metadata":{},"sourceType":"module","externalDependencies":[]}