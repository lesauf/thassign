{"ast":null,"code":"import { EventEmitter } from '@angular/core';\nimport { MatLegacyDialogRef as MatDialogRef } from '@angular/material/legacy-dialog';\nimport { AssignableListComponent } from '@src/app/modules/assignments/components/assignable-list/assignable-list.component';\nimport * as i0 from \"@angular/core\";\nimport * as i1 from \"@angular/common\";\nimport * as i2 from \"@angular/forms\";\nimport * as i3 from \"@angular/material/legacy-core\";\nimport * as i4 from \"@angular/material/legacy-button\";\nimport * as i5 from \"@angular/material/legacy-form-field\";\nimport * as i6 from \"@angular/material/icon\";\nimport * as i7 from \"@angular/material/legacy-select\";\nimport * as i8 from \"@src/app/shared/components/picker/picker.component\";\nconst _c0 = [\"options\"];\nconst _c1 = [\"assignableList\"];\nfunction AssignmentComponent_div_0_ng_container_15_mat_option_1_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelementStart(0, \"mat-option\", 13);\n    i0.ɵɵtext(1);\n    i0.ɵɵpipe(2, \"translate\");\n    i0.ɵɵelementEnd();\n  }\n  if (rf & 2) {\n    const part_r6 = i0.ɵɵnextContext().$implicit;\n    i0.ɵɵproperty(\"value\", part_r6);\n    i0.ɵɵadvance(1);\n    i0.ɵɵtextInterpolate1(\" \", i0.ɵɵpipeBind1(2, 2, part_r6.name), \" \");\n  }\n}\nfunction AssignmentComponent_div_0_ng_container_15_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelementContainerStart(0);\n    i0.ɵɵtemplate(1, AssignmentComponent_div_0_ng_container_15_mat_option_1_Template, 3, 4, \"mat-option\", 12);\n    i0.ɵɵelementContainerEnd();\n  }\n  if (rf & 2) {\n    const part_r6 = ctx.$implicit;\n    i0.ɵɵadvance(1);\n    i0.ɵɵproperty(\"ngIf\", part_r6.meeting !== \"any\");\n  }\n}\nconst _c2 = function (a0, a1) {\n  return [a0, a1, \"part\"];\n};\nconst _c3 = function (a0, a1) {\n  return [a0, a1, \"assignee\"];\n};\nfunction AssignmentComponent_div_0_app_picker_17_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelement(0, \"app-picker\", 14);\n    i0.ɵɵpipe(1, \"titlecase\");\n    i0.ɵɵpipe(2, \"translate\");\n  }\n  if (rf & 2) {\n    const ctx_r4 = i0.ɵɵnextContext(2);\n    i0.ɵɵpropertyInterpolate(\"placeholder\", i0.ɵɵpipeBind1(1, 6, i0.ɵɵpipeBind1(2, 8, \"assignee\")));\n    i0.ɵɵproperty(\"optionsTemplate\", ctx_r4.displayComponentRef.componentType)(\"title\", ctx_r4.form.get(i0.ɵɵpureFunction2(10, _c2, ctx_r4.wIndex, ctx_r4.assignment.position)).value == null ? null : ctx_r4.form.get(i0.ɵɵpureFunction2(13, _c2, ctx_r4.wIndex, ctx_r4.assignment.position)).value.name)(\"form\", ctx_r4.form)(\"controlPath\", i0.ɵɵpureFunction2(16, _c3, ctx_r4.wIndex, ctx_r4.assignment.position))(\"options\", ctx_r4.assignableListByPart[ctx_r4.form.get(i0.ɵɵpureFunction2(19, _c2, ctx_r4.wIndex, ctx_r4.assignment.position)).value == null ? null : ctx_r4.form.get(i0.ɵɵpureFunction2(22, _c2, ctx_r4.wIndex, ctx_r4.assignment.position)).value.name]);\n  }\n}\nconst _c4 = function (a0, a1) {\n  return [a0, a1, \"assistant\"];\n};\nfunction AssignmentComponent_div_0_app_picker_19_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelement(0, \"app-picker\", 14);\n    i0.ɵɵpipe(1, \"titlecase\");\n    i0.ɵɵpipe(2, \"translate\");\n    i0.ɵɵpipe(3, \"titlecase\");\n    i0.ɵɵpipe(4, \"translate\");\n  }\n  if (rf & 2) {\n    const ctx_r5 = i0.ɵɵnextContext(2);\n    i0.ɵɵpropertyInterpolate(\"title\", i0.ɵɵpipeBind1(1, 6, i0.ɵɵpipeBind1(2, 8, \"assistant\")));\n    i0.ɵɵpropertyInterpolate(\"placeholder\", i0.ɵɵpipeBind1(3, 10, i0.ɵɵpipeBind1(4, 12, \"assistant\")));\n    i0.ɵɵproperty(\"optionsTemplate\", ctx_r5.displayComponentRef.componentType)(\"form\", ctx_r5.form)(\"controlPath\", i0.ɵɵpureFunction2(14, _c4, ctx_r5.wIndex, ctx_r5.assignment.position))(\"options\", ctx_r5.assignableListByPart[\"clm.ministry.assistant\"]);\n  }\n}\nfunction AssignmentComponent_div_0_Template(rf, ctx) {\n  if (rf & 1) {\n    const _r10 = i0.ɵɵgetCurrentView();\n    i0.ɵɵelementStart(0, \"div\", 2)(1, \"div\", 3)(2, \"div\", 4)(3, \"div\", 5)(4, \"button\", 6);\n    i0.ɵɵlistener(\"click\", function AssignmentComponent_div_0_Template_button_click_4_listener() {\n      i0.ɵɵrestoreView(_r10);\n      const ctx_r9 = i0.ɵɵnextContext();\n      return i0.ɵɵresetView(ctx_r9.removeAssignment());\n    });\n    i0.ɵɵelementStart(5, \"mat-icon\");\n    i0.ɵɵtext(6, \"close\");\n    i0.ɵɵelementEnd()()();\n    i0.ɵɵelementStart(7, \"div\", 7)(8, \"mat-form-field\", 8)(9, \"mat-select\", 9);\n    i0.ɵɵlistener(\"selectionChange\", function AssignmentComponent_div_0_Template_mat_select_selectionChange_9_listener($event) {\n      i0.ɵɵrestoreView(_r10);\n      const ctx_r11 = i0.ɵɵnextContext();\n      return i0.ɵɵresetView(ctx_r11.onPartChange($event));\n    });\n    i0.ɵɵpipe(10, \"titlecase\");\n    i0.ɵɵpipe(11, \"translate\");\n    i0.ɵɵelementStart(12, \"mat-select-trigger\");\n    i0.ɵɵtext(13);\n    i0.ɵɵpipe(14, \"translate\");\n    i0.ɵɵelementEnd();\n    i0.ɵɵtemplate(15, AssignmentComponent_div_0_ng_container_15_Template, 2, 1, \"ng-container\", 10);\n    i0.ɵɵelementEnd()()();\n    i0.ɵɵelementStart(16, \"div\", 7);\n    i0.ɵɵtemplate(17, AssignmentComponent_div_0_app_picker_17_Template, 3, 25, \"app-picker\", 11);\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementStart(18, \"div\", 7);\n    i0.ɵɵtemplate(19, AssignmentComponent_div_0_app_picker_19_Template, 5, 17, \"app-picker\", 11);\n    i0.ɵɵelementEnd()()()();\n  }\n  if (rf & 2) {\n    const ctx_r0 = i0.ɵɵnextContext();\n    i0.ɵɵproperty(\"formGroup\", ctx_r0.form);\n    i0.ɵɵadvance(1);\n    i0.ɵɵpropertyInterpolate(\"formArrayName\", ctx_r0.wIndex);\n    i0.ɵɵadvance(1);\n    i0.ɵɵpropertyInterpolate(\"formGroupName\", ctx_r0.assignment.position);\n    i0.ɵɵadvance(2);\n    i0.ɵɵproperty(\"disabled\", ctx_r0.form.disabled);\n    i0.ɵɵadvance(5);\n    i0.ɵɵpropertyInterpolate(\"placeholder\", i0.ɵɵpipeBind1(10, 10, i0.ɵɵpipeBind1(11, 12, \"assignment\")));\n    i0.ɵɵproperty(\"compareWith\", ctx_r0.compareFn);\n    i0.ɵɵadvance(4);\n    i0.ɵɵtextInterpolate1(\" \", i0.ɵɵpipeBind1(14, 14, ctx_r0.form.get(i0.ɵɵpureFunction2(16, _c2, ctx_r0.wIndex, ctx_r0.assignment.position)).value == null ? null : ctx_r0.form.get(i0.ɵɵpureFunction2(19, _c2, ctx_r0.wIndex, ctx_r0.assignment.position)).value.name), \" \");\n    i0.ɵɵadvance(2);\n    i0.ɵɵproperty(\"ngForOf\", ctx_r0.listOfParts);\n    i0.ɵɵadvance(2);\n    i0.ɵɵproperty(\"ngIf\", ctx_r0.form.get(i0.ɵɵpureFunction2(22, _c2, ctx_r0.wIndex, ctx_r0.assignment.position)).value);\n    i0.ɵɵadvance(2);\n    i0.ɵɵproperty(\"ngIf\", ctx_r0.form.get(i0.ɵɵpureFunction2(25, _c2, ctx_r0.wIndex, ctx_r0.assignment.position)).value == null ? null : ctx_r0.form.get(i0.ɵɵpureFunction2(28, _c2, ctx_r0.wIndex, ctx_r0.assignment.position)).value.withAssistant);\n  }\n}\nfunction AssignmentComponent_ng_template_1_span_7_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelementStart(0, \"span\", 20);\n    i0.ɵɵtext(1);\n    i0.ɵɵelementEnd();\n  }\n  if (rf & 2) {\n    const ctx_r12 = i0.ɵɵnextContext(2);\n    i0.ɵɵadvance(1);\n    i0.ɵɵtextInterpolate1(\" / \", ctx_r12.assignment.assistant == null ? null : ctx_r12.assignment.assistant.fullName, \" \");\n  }\n}\nfunction AssignmentComponent_ng_template_1_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelementStart(0, \"div\", 15)(1, \"div\", 16);\n    i0.ɵɵtext(2);\n    i0.ɵɵpipe(3, \"translate\");\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementStart(4, \"div\", 17)(5, \"span\", 18);\n    i0.ɵɵtext(6);\n    i0.ɵɵelementEnd();\n    i0.ɵɵtemplate(7, AssignmentComponent_ng_template_1_span_7_Template, 2, 1, \"span\", 19);\n    i0.ɵɵelementEnd()();\n  }\n  if (rf & 2) {\n    const ctx_r2 = i0.ɵɵnextContext();\n    i0.ɵɵadvance(2);\n    i0.ɵɵtextInterpolate1(\" \", i0.ɵɵpipeBind1(3, 3, ctx_r2.assignment.part.name), \" \");\n    i0.ɵɵadvance(4);\n    i0.ɵɵtextInterpolate1(\" \", ctx_r2.assignment.assignee == null ? null : ctx_r2.assignment.assignee.fullName, \" \");\n    i0.ɵɵadvance(1);\n    i0.ɵɵproperty(\"ngIf\", ctx_r2.assignment.part.withAssistant);\n  }\n}\nexport class AssignmentComponent {\n  constructor(resolver, appRef, injector) {\n    this.resolver = resolver;\n    this.appRef = appRef;\n    this.injector = injector;\n    this.isRemoved = new EventEmitter();\n    this.dialogRef = null;\n    this.dialogRef = this.injector.get(MatDialogRef, null);\n    // this.data = this.injector.get(MAT_DIALOG_DATA, null);\n  }\n\n  ngOnInit() {\n    const componentFactory = this.resolver.resolveComponentFactory(AssignableListComponent);\n    this.displayComponentRef = componentFactory.create(this.injector);\n    // this.appRef.attachView(componentRef.hostView);\n  }\n\n  ngOnDestroy() {\n    this.displayComponentRef.destroy();\n  }\n  get isValid() {\n    return this.form.controls[this.assignment.key].valid;\n  }\n  /**\r\n   * Clear the assignment everytime its part changes\r\n   */\n  onPartChange(partSelected) {\n    this.form.get([this.wIndex, this.assignment.position]).setValue(this.assignment);\n    this.form.get([this.wIndex, this.assignment.position]).patchValue({\n      part: partSelected.value\n    });\n    // this.assignableList = this.assignableListByPart[partSelected.value.name];\n    // console.log(this.assignableList);\n  }\n\n  removeAssignment() {\n    this.isRemoved.emit(this.assignment);\n  }\n  closeDialog() {\n    this.form.get([this.wIndex, this.assignment.position]).setValue(this.assignment);\n    this.form.get([this.wIndex, this.assignment.position]).patchValue({\n      assignee: this.options.selectedOptions.selected[0].value\n    });\n    console.log(this.options.selectedOptions.selected[0].value);\n    // this.dialogRef.close();\n  }\n  /**\r\n   * Used to set the value of Select list\r\n   */\n  compareFn(c1, c2) {\n    // console.log(c1);\n    return c1 && c2 ? c1._id === c2._id : c1 === c2;\n  }\n  static #_ = this.ɵfac = function AssignmentComponent_Factory(t) {\n    return new (t || AssignmentComponent)(i0.ɵɵdirectiveInject(i0.ComponentFactoryResolver), i0.ɵɵdirectiveInject(i0.ApplicationRef), i0.ɵɵdirectiveInject(i0.Injector));\n  };\n  static #_2 = this.ɵcmp = /*@__PURE__*/i0.ɵɵdefineComponent({\n    type: AssignmentComponent,\n    selectors: [[\"app-assignment\"]],\n    viewQuery: function AssignmentComponent_Query(rf, ctx) {\n      if (rf & 1) {\n        i0.ɵɵviewQuery(_c0, 5);\n        i0.ɵɵviewQuery(_c1, 5);\n      }\n      if (rf & 2) {\n        let _t;\n        i0.ɵɵqueryRefresh(_t = i0.ɵɵloadQuery()) && (ctx.options = _t.first);\n        i0.ɵɵqueryRefresh(_t = i0.ɵɵloadQuery()) && (ctx.assignableListTpl = _t.first);\n      }\n    },\n    inputs: {\n      assignment: \"assignment\",\n      isEditMode: \"isEditMode\",\n      listOfParts: \"listOfParts\",\n      assignableListByPart: \"assignableListByPart\",\n      form: \"form\",\n      wIndex: \"wIndex\"\n    },\n    outputs: {\n      isRemoved: \"isRemoved\"\n    },\n    decls: 3,\n    vars: 2,\n    consts: [[3, \"formGroup\", 4, \"ngIf\", \"ngIfElse\"], [\"assignmentDisplay\", \"\"], [3, \"formGroup\"], [3, \"formArrayName\"], [\"fxLayout\", \"row\", \"fxLayoutAlign\", \"space-around center\", 3, \"formGroupName\"], [\"fxFlex\", \"5\"], [\"mat-button\", \"\", \"type\", \"button\", \"mat-icon-button\", \"\", 3, \"disabled\", \"click\"], [\"fxFlex\", \"30\", \"fxFlex.lt-sm\", \"auto\"], [\"fxFill\", \"\"], [\"formControlName\", \"part\", 3, \"placeholder\", \"compareWith\", \"selectionChange\"], [4, \"ngFor\", \"ngForOf\"], [\"labelField\", \"fullName\", 3, \"optionsTemplate\", \"title\", \"placeholder\", \"form\", \"controlPath\", \"options\", 4, \"ngIf\"], [3, \"value\", 4, \"ngIf\"], [3, \"value\"], [\"labelField\", \"fullName\", 3, \"optionsTemplate\", \"title\", \"placeholder\", \"form\", \"controlPath\", \"options\"], [\"fxLayout\", \"row wrap\", \"fxLayoutAlign\", \"start center\"], [\"fxFlex\", \"30\", \"fxFlex.lt-sm\", \"100\", \"fxFlexOffset\", \"5\", 1, \"assignment-name\"], [\"fxFlex\", \"50\", \"fxFlex.lt-sm\", \"100\", \"fxFlexOffset.lt-sm\", \"10\"], [1, \"assignment-assignee\"], [\"class\", \"assignment-assistant\", 4, \"ngIf\"], [1, \"assignment-assistant\"]],\n    template: function AssignmentComponent_Template(rf, ctx) {\n      if (rf & 1) {\n        i0.ɵɵtemplate(0, AssignmentComponent_div_0_Template, 20, 31, \"div\", 0);\n        i0.ɵɵtemplate(1, AssignmentComponent_ng_template_1_Template, 8, 5, \"ng-template\", null, 1, i0.ɵɵtemplateRefExtractor);\n      }\n      if (rf & 2) {\n        const _r1 = i0.ɵɵreference(2);\n        i0.ɵɵproperty(\"ngIf\", ctx.isEditMode)(\"ngIfElse\", _r1);\n      }\n    },\n    dependencies: [i1.NgForOf, i1.NgIf, i2.NgControlStatus, i2.NgControlStatusGroup, i3.MatLegacyOption, i4.MatLegacyButton, i5.MatLegacyFormField, i6.MatIcon, i7.MatLegacySelect, i7.MatLegacySelectTrigger, i2.FormGroupDirective, i2.FormControlName, i2.FormGroupName, i2.FormArrayName, i8.PickerComponent, i1.TitleCasePipe],\n    styles: [\".assignment-assignee[_ngcontent-%COMP%] {\\n  font-weight: bold;\\n}\\n/*# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbImFzc2lnbm1lbnQuY29tcG9uZW50LnNjc3MiXSwibmFtZXMiOltdLCJtYXBwaW5ncyI6IkFBS0U7RUFDRSxpQkFBQTtBQUpKIiwiZmlsZSI6ImFzc2lnbm1lbnQuY29tcG9uZW50LnNjc3MiLCJzb3VyY2VzQ29udGVudCI6WyIvLyAuYXNzaWdubWVudC1uYW1lIHt9XHJcblxyXG5cclxuXHJcbi8vIEBtZWRpYSBwcmludCB7XHJcbiAgLmFzc2lnbm1lbnQtYXNzaWduZWUge1xyXG4gICAgZm9udC13ZWlnaHQ6IGJvbGQ7XHJcbiAgfVxyXG5cclxuLy8gfVxyXG4vLyAuYXNzaWdubWVudC1hc3Npc3RhbnQge31cclxuIl19 */\\n/*# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly8uL3NyYy9hcHAvbW9kdWxlcy9hc3NpZ25tZW50cy9jb21wb25lbnRzL2Fzc2lnbm1lbnQvYXNzaWdubWVudC5jb21wb25lbnQuc2NzcyJdLCJuYW1lcyI6W10sIm1hcHBpbmdzIjoiQUFLRTtFQUNFLGlCQUFBO0FBSko7QUFDQSw0ZEFBNGQiLCJzb3VyY2VzQ29udGVudCI6WyIvLyAuYXNzaWdubWVudC1uYW1lIHt9XHJcblxyXG5cclxuXHJcbi8vIEBtZWRpYSBwcmludCB7XHJcbiAgLmFzc2lnbm1lbnQtYXNzaWduZWUge1xyXG4gICAgZm9udC13ZWlnaHQ6IGJvbGQ7XHJcbiAgfVxyXG5cclxuLy8gfVxyXG4vLyAuYXNzaWdubWVudC1hc3Npc3RhbnQge31cclxuIl0sInNvdXJjZVJvb3QiOiIifQ== */\"]\n  });\n}","map":{"version":3,"names":["EventEmitter","MatLegacyDialogRef","MatDialogRef","AssignableListComponent","i0","ɵɵelementStart","ɵɵtext","ɵɵelementEnd","ɵɵproperty","part_r6","ɵɵadvance","ɵɵtextInterpolate1","ɵɵpipeBind1","name","ɵɵelementContainerStart","ɵɵtemplate","AssignmentComponent_div_0_ng_container_15_mat_option_1_Template","ɵɵelementContainerEnd","meeting","ɵɵelement","ɵɵpropertyInterpolate","ctx_r4","displayComponentRef","componentType","form","get","ɵɵpureFunction2","_c2","wIndex","assignment","position","value","_c3","assignableListByPart","ctx_r5","_c4","ɵɵlistener","AssignmentComponent_div_0_Template_button_click_4_listener","ɵɵrestoreView","_r10","ctx_r9","ɵɵnextContext","ɵɵresetView","removeAssignment","AssignmentComponent_div_0_Template_mat_select_selectionChange_9_listener","$event","ctx_r11","onPartChange","AssignmentComponent_div_0_ng_container_15_Template","AssignmentComponent_div_0_app_picker_17_Template","AssignmentComponent_div_0_app_picker_19_Template","ctx_r0","disabled","compareFn","listOfParts","withAssistant","ctx_r12","assistant","fullName","AssignmentComponent_ng_template_1_span_7_Template","ctx_r2","part","assignee","AssignmentComponent","constructor","resolver","appRef","injector","isRemoved","dialogRef","ngOnInit","componentFactory","resolveComponentFactory","create","ngOnDestroy","destroy","isValid","controls","key","valid","partSelected","setValue","patchValue","emit","closeDialog","options","selectedOptions","selected","console","log","c1","c2","_id","_","ɵɵdirectiveInject","ComponentFactoryResolver","ApplicationRef","Injector","_2","selectors","viewQuery","AssignmentComponent_Query","rf","ctx","AssignmentComponent_div_0_Template","AssignmentComponent_ng_template_1_Template","ɵɵtemplateRefExtractor","isEditMode","_r1"],"sources":["C:\\Users\\CSEG\\Desktop\\thassign\\src\\app\\modules\\assignments\\components\\assignment\\assignment.component.ts","C:\\Users\\CSEG\\Desktop\\thassign\\src\\app\\modules\\assignments\\components\\assignment\\assignment.component.html"],"sourcesContent":["import {\r\n  Component,\r\n  Input,\r\n  Output,\r\n  EventEmitter,\r\n  OnInit,\r\n  OnDestroy,\r\n  ComponentFactoryResolver,\r\n  Injector,\r\n  ApplicationRef,\r\n  ComponentRef,\r\n  ViewChild,\r\n  TemplateRef,\r\n} from '@angular/core';\r\nimport { UntypedFormGroup, FormArray } from '@angular/forms';\r\nimport { MatLegacySelectionList as MatSelectionList } from '@angular/material/legacy-list';\r\nimport { MatLegacyDialogRef as MatDialogRef } from '@angular/material/legacy-dialog';\r\n\r\nimport { Assignment } from '@src/app/core/models/assignment/assignment.model';\r\nimport { Part } from '@src/app/core/models/part/part.model';\r\nimport { User } from '@src/app/core/models/user/user.model';\r\nimport { MatLegacySelectChange as MatSelectChange } from '@angular/material/legacy-select';\r\nimport { AssignableListComponent } from '@src/app/modules/assignments/components/assignable-list/assignable-list.component';\r\n\r\n@Component({\r\n  selector: 'app-assignment',\r\n  templateUrl: './assignment.component.html',\r\n  styleUrls: ['./assignment.component.scss'],\r\n})\r\nexport class AssignmentComponent implements OnInit, OnDestroy {\r\n  @Input() assignment: Assignment;\r\n  @Input() isEditMode: boolean;\r\n  @Input() listOfParts: Part[];\r\n  @Input() assignableListByPart: User[][];\r\n  @Input() form: UntypedFormGroup;\r\n  @Input() wIndex: number;\r\n\r\n  @Output() isRemoved: EventEmitter<Assignment> = new EventEmitter();\r\n\r\n  public displayComponentRef: ComponentRef<AssignableListComponent<User>>;\r\n\r\n  @ViewChild('options', { static: false }) options: MatSelectionList;\r\n\r\n  @ViewChild('assignableList')\r\n  public assignableListTpl: TemplateRef<any>;\r\n\r\n  /**\r\n   * Assignable list for selected part\r\n   */\r\n  public assignableList: User[];\r\n\r\n  public dialogRef = null;\r\n\r\n  constructor(\r\n    private resolver: ComponentFactoryResolver,\r\n    private appRef: ApplicationRef,\r\n    private injector: Injector\r\n  ) {\r\n    this.dialogRef = this.injector.get(MatDialogRef, null);\r\n    // this.data = this.injector.get(MAT_DIALOG_DATA, null);\r\n  }\r\n\r\n  ngOnInit(): void {\r\n    const componentFactory = this.resolver.resolveComponentFactory(\r\n      AssignableListComponent\r\n    );\r\n\r\n    this.displayComponentRef = componentFactory.create(this.injector);\r\n    // this.appRef.attachView(componentRef.hostView);\r\n  }\r\n\r\n  ngOnDestroy() {\r\n    this.displayComponentRef.destroy();\r\n  }\r\n\r\n  get isValid() {\r\n    return this.form.controls[this.assignment.key].valid;\r\n  }\r\n\r\n  /**\r\n   * Clear the assignment everytime its part changes\r\n   */\r\n  onPartChange(partSelected: MatSelectChange) {\r\n    this.form\r\n      .get([this.wIndex, this.assignment.position])\r\n      .setValue(this.assignment);\r\n    this.form\r\n      .get([this.wIndex, this.assignment.position])\r\n      .patchValue({ part: partSelected.value });\r\n    // this.assignableList = this.assignableListByPart[partSelected.value.name];\r\n\r\n    // console.log(this.assignableList);\r\n  }\r\n\r\n  removeAssignment() {\r\n    this.isRemoved.emit(this.assignment);\r\n  }\r\n\r\n  closeDialog() {\r\n    this.form\r\n      .get([this.wIndex, this.assignment.position])\r\n      .setValue(this.assignment);\r\n    this.form\r\n      .get([this.wIndex, this.assignment.position])\r\n      .patchValue({ assignee: this.options.selectedOptions.selected[0].value });\r\n\r\n    console.log(this.options.selectedOptions.selected[0].value);\r\n    // this.dialogRef.close();\r\n  }\r\n\r\n  /**\r\n   * Used to set the value of Select list\r\n   */\r\n  compareFn(c1, c2): boolean {\r\n    // console.log(c1);\r\n    return c1 && c2 ? c1._id === c2._id : c1 === c2;\r\n  }\r\n}\r\n","<div [formGroup]=\"form\" *ngIf=\"isEditMode; else assignmentDisplay\">\r\n  <div formArrayName=\"{{ wIndex }}\">\r\n    <div\r\n      fxLayout=\"row\"\r\n      formGroupName=\"{{ assignment.position }}\"\r\n      fxLayoutAlign=\"space-around center\"\r\n    >\r\n      <div fxFlex=\"5\">\r\n        <button\r\n          mat-button\r\n          type=\"button\"\r\n          mat-icon-button\r\n          [disabled]=\"form.disabled\"\r\n          (click)=\"removeAssignment()\"\r\n        >\r\n          <mat-icon>close</mat-icon>\r\n        </button>\r\n      </div>\r\n      <!-- PART -->\r\n      <div fxFlex=\"30\" fxFlex.lt-sm=\"auto\">\r\n        <mat-form-field fxFill>\r\n          <mat-select\r\n            placeholder=\"{{ 'assignment' | translate | titlecase }}\"\r\n            [compareWith]=\"compareFn\"\r\n            formControlName=\"part\"\r\n            (selectionChange)=\"onPartChange($event)\"\r\n          >\r\n            <mat-select-trigger>\r\n              {{\r\n                form.get([wIndex, assignment.position, \"part\"]).value?.name\r\n                  | translate\r\n              }}\r\n            </mat-select-trigger>\r\n\r\n            <ng-container *ngFor=\"let part of listOfParts\">\r\n              <mat-option *ngIf=\"part.meeting!=='any'\" [value]=\"part\">\r\n                {{ part.name | translate }}\r\n              </mat-option>\r\n            </ng-container>\r\n          </mat-select>\r\n        </mat-form-field>\r\n      </div>\r\n      <!-- ASSIGNEE -->\r\n      <div fxFlex=\"30\" fxFlex.lt-sm=\"auto\">\r\n        <app-picker\r\n          *ngIf=\"form.get([wIndex, assignment.position, 'part']).value\"\r\n          [optionsTemplate]=\"displayComponentRef.componentType\"\r\n          [title]=\"form.get([wIndex, assignment.position, 'part']).value?.name\"\r\n          placeholder=\"{{ 'assignee' | translate | titlecase }}\"\r\n          [form]=\"form\"\r\n          [controlPath]=\"[wIndex, assignment.position, 'assignee']\"\r\n          [options]=\"\r\n            assignableListByPart[\r\n              form.get([wIndex, assignment.position, 'part']).value?.name\r\n            ]\r\n          \"\r\n          labelField=\"fullName\"\r\n        ></app-picker>\r\n\r\n      </div>\r\n      <!-- ASSISTANT -->\r\n      <div fxFlex=\"30\" fxFlex.lt-sm=\"auto\">\r\n        <app-picker\r\n          *ngIf=\"\r\n            form.get([wIndex, assignment.position, 'part']).value?.withAssistant\r\n          \"\r\n          [optionsTemplate]=\"displayComponentRef.componentType\"\r\n          title=\"{{ 'assistant' | translate | titlecase }}\"\r\n          placeholder=\"{{ 'assistant' | translate | titlecase }}\"\r\n          [form]=\"form\"\r\n          [controlPath]=\"[wIndex, assignment.position, 'assistant']\"\r\n          [options]=\"assignableListByPart['clm.ministry.assistant']\"\r\n          labelField=\"fullName\"\r\n        ></app-picker>\r\n        \r\n      </div>\r\n    </div>\r\n  </div>\r\n</div>\r\n\r\n<!-- ASSIGNMENT DISPLAY -->\r\n<ng-template #assignmentDisplay>\r\n  <div fxLayout=\"row wrap\" fxLayoutAlign=\"start center\">\r\n    <!-- PART -->\r\n    <div\r\n      fxFlex=\"30\"\r\n      fxFlex.lt-sm=\"100\"\r\n      fxFlexOffset=\"5\"\r\n      class=\"assignment-name\"\r\n    >\r\n      {{ assignment.part.name | translate }}\r\n    </div>\r\n    <!-- ASSIGNEE & ASSISTANT -->\r\n    <div fxFlex=\"50\" fxFlex.lt-sm=\"100\" fxFlexOffset.lt-sm=\"10\">\r\n      <span class=\"assignment-assignee\">\r\n        {{ assignment.assignee?.fullName }}\r\n      </span>\r\n      <span *ngIf=\"assignment.part.withAssistant\" class=\"assignment-assistant\">\r\n        / {{ assignment.assistant?.fullName }}\r\n      </span>\r\n    </div>\r\n  </div>\r\n</ng-template>\r\n"],"mappings":"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"},"metadata":{},"sourceType":"module","externalDependencies":[]}